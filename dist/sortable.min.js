!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Sortable=e()}(this,function(){"use strict";function e(e,t){var o,n=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)),n}function c(n){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach(function(t){var e,o;e=n,o=i[t=t],t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var l,h=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),N=t(/Edge/i),u=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),I=t(/iP(ad|od|hone)/i),R=t(/chrome/i)&&t(/android/i),W={capture:!1,passive:!1},X=/\s+/g,f=["-webkit-transition","-moz-transition","-ms-transition","-o-transition","transition"],Y=["-webkit-transform","-moz-transform","-ms-transform","-o-transform","transform"],F=(l=!1,document.addEventListener("checkIfSupportPassive",null,{get passive(){return l=!0}}),l);function d(e,o){o?"none"===o?f.forEach(function(t){return _(e,t,"none")}):f.forEach(function(t){return _(e,t,"".concat(t.split("transition")[0],"transform ").concat(o))}):f.forEach(function(t){return _(e,t,"")})}function p(e,o){o?Y.forEach(function(t){return _(e,t,"".concat(t.split("transform")[0]).concat(o))}):Y.forEach(function(t){return _(e,t,"")})}function g(t){var e=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,t=e||t;return{touch:e,e:t,target:e?document.elementFromPoint(t.clientX,t.clientY):t.target}}function m(t,e,o){window.addEventListener?t.addEventListener(e,o,!(!F&&h)&&W):window.attachEvent&&t.attachEvent("on"+e,o)}function v(t,e,o){window.removeEventListener?t.removeEventListener(e,o,!(!F&&h)&&W):window.detachEvent&&t.detachEvent("on"+e,o)}function b(t){for(var e={top:0,left:0,height:0,width:0},o=(e.height=t.offsetHeight,e.width=t.offsetWidth,e.top=t.offsetTop,e.left=t.offsetLeft,t.offsetParent);null!==o;)e.top+=o.offsetTop,e.left+=o.offsetLeft,o=o.offsetParent;return e}function y(){var t=document.scrollingElement;return!t||t.contains(document.body)?document:t}function w(t,e){if(t.getBoundingClientRect||t===window){var o,n={top:0,left:0,bottom:0,right:0,height:0,width:0};if(t!==window&&t.parentNode&&t!==y()){if(o=t.getBoundingClientRect(),n.top=o.top,n.left=o.left,n.bottom=o.bottom,n.right=o.right,n.height=o.height,n.width=o.width,e&&t.parentNode!==t.ownerDocument.body)for(var i,r=t.parentNode;r&&r.getBoundingClientRect&&r!==t.ownerDocument.body;){if((i=r.getBoundingClientRect()).height<n.height)return n.top=i.top,n.left=i.left,n.bottom=i.bottom,n.right=i.right,n.height=i.height,n.width=i.width,n;r=r.parentNode}}else n.top=0,n.left=0,n.bottom=window.innerHeight,n.right=window.innerWidth,n.height=window.innerHeight,n.width=window.innerWidth;return n}}function D(t,e,o){var n=r(Array.from(t.children)),t=n.indexOf(e);if(-1<t)return o?n[t]:{index:t,el:n[t],rect:w(n[t]),offset:b(n[t])};for(var i=0;i<n.length;i++)if(H(e,n[i]))return o?n[i]:{index:i,el:n[i],rect:w(n[i]),offset:b(n[i])};return o?null:{index:-1,el:null,rect:{},offset:{}}}function H(t,e){var o;if(t&&e)for(o=t.parentNode;o;){if(e===o)return!0;o=o.parentNode}return!1}function E(t,e,o){var n;t&&e&&(t.classList?t.classList[o?"add":"remove"](e):(n=(" "+t.className+" ").replace(X," ").replace(" "+e+" "," "),t.className=(n+(o?" "+e:"")).replace(X," ")))}function q(t,e){if(e&&(">"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function _(t,e,o){var n=t&&t.style;if(n){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];n[e=e in n||-1!==e.indexOf("webkit")?e:"-webkit-"+e]=o+("string"==typeof o?"":"px")}}function z(o,n,i){var r=null;return function(){var t=this,e=arguments;r&&clearTimeout(r),i&&!r&&o.apply(t,e),r=setTimeout(function(){o.apply(t,e)},n)}}function V(o,n){var i=null;return function(){var t=this,e=arguments;i=i||setTimeout(function(){i=null,o.apply(t,e)},n)}}var S="Sortable"+Date.now(),G=i(function t(){o(this,t),this.sortableDown=void 0,this.sortableMove=void 0,this.animationEnd=void 0}),U=function(){function t(){o(this,t),this.from={sortable:null,group:null,node:null,rect:{},offset:{}},this.to={sortable:null,group:null,node:null,rect:{},offset:{}}}return i(t,[{key:"destroy",value:function(){this.from={sortable:null,group:null,node:null,rect:{},offset:{}},this.to={sortable:null,group:null,node:null,rect:{},offset:{}}}}]),t}(),Z=function(){function e(t){o(this,e),this.el=null,this.initPos=this.distance={x:0,y:0},this.options=t.options,this.container=t.container}return i(e,[{key:"init",value:function(t,e,o){this.el=t,o&&(o=(t=this.options).ghostClass,t=void 0===(t=t.ghostStyle)?{}:t,E(this.el,o,!0),_(this.el,"box-sizing","border-box"),_(this.el,"margin",0),_(this.el,"top",e.top),_(this.el,"left",e.left),_(this.el,"width",e.width),_(this.el,"height",e.height),_(this.el,"opacity","0.8"),_(this.el,"position","fixed"),_(this.el,"zIndex","100000"),_(this.el,"pointerEvents","none"),this.setStyle(t),d(this.el,"none"),p(this.el,"translate3d(0px, 0px, 0px)"),this.container.appendChild(this.el),_(this.el,"transform-origin",this.distance.x/parseInt(this.el.style.width)*100+"% "+this.distance.y/parseInt(this.el.style.height)*100+"%"),_(this.el,"transform","translateZ(0)"))}},{key:"setStyle",value:function(t){for(var e in t)_(this.el,e,t[e])}},{key:"rect",value:function(){return w(this.el)}},{key:"move",value:function(t,e){this.el&&(d(this.el,2<arguments.length&&void 0!==arguments[2]&&arguments[2]?"".concat(this.options.ghostAnimation,"ms"):"none"),p(this.el,"translate3d(".concat(t-this.initPos.x,"px, ").concat(e-this.initPos.y,"px, 0)")))}},{key:"clear",value:function(){this.distance={x:0,y:0},this.el&&this.el.remove(),this.el=null}},{key:"destroy",value:function(t){var e,o,n=this;this.el&&(o=parseInt(this.el.style.left),e=parseInt(this.el.style.top),this.move(t.left-o,t.top-e,!0),(o=this.options.ghostAnimation)?setTimeout(function(){return n.clear()},o):this.clear())}}]),e}();function $(){var i=[];return{_captureAnimationState:function(t,e){var o=r(Array.from(this.el.children)),e=(t=t,e=e,t=(n=o).indexOf(t),n=n.indexOf(e),t<n?{start:t,end:n}:{start:n,end:t}),n=e.start,t=e.end;i.length=0,o.slice(n,t+1).forEach(function(t){i.push({target:t,rect:w(t)})})},_rangeAnimate:function(){var o=this;i.forEach(function(t){var e=t.target,t=t.rect;o._animate(e,t,o.options.animation)})},_animate:function(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:150,n=w(t),i=e.left-n.left,e=e.top-n.top;d(t,"none"),p(t,"translate3d(".concat(i,"px, ").concat(e,"px, 0)")),t.offsetWidth,d(t,"".concat(o,"ms")),p(t,"translate3d(0px, 0px, 0px)"),clearTimeout(t.animated),t.animated=setTimeout(function(){d(t,""),p(t,""),t.animated=null},o)}}}function T(t){if(O){var e=t=t.touches?t.touches[0]:t,o=e.clientX,e=e.clientY,n=J(o,e);if(n){var i,r={};for(i in t)r[i]=t[i];r.target=document.elementFromPoint(o,e),r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[S]._triggerEvent(r)}}}function J(i,r){var s;return Q.some(function(t){var e,o,n=t[S].options.emptyInsertThreshold;if(n)return o=w(t,!0),e=i>=o.left-n&&i<=o.right+n,o=r>=o.top-n&&r<=o.bottom+n,e&&o?s=t:void 0}),s}var x,O,P,A,C,M,K="undefined"!=typeof document&&!R&&!I&&"draggable"in document.createElement("div"),Q=[],j=new G,k=new U,L={x:0,y:0};function B(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));(t[S]=this).el=t,this.scrollEl=function(t,e){if(!t||!t.getBoundingClientRect)return y();var o=t,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var i=_(o);if(o.clientWidth<o.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!o.getBoundingClientRect||o===document.body)return y();if(n||e)return o;n=!0}}}while(o=o.parentNode);return y()}(t,!0),this.options=e=Object.assign({},e),this.ownerDocument=t.ownerDocument;var o,n,i={group:"",animation:150,draggable:void 0,onDrag:void 0,onMove:void 0,onDrop:void 0,onChange:void 0,autoScroll:!0,scrollStep:5,scrollThreshold:15,delay:0,delayOnTouchOnly:!1,disabled:!1,ghostAnimation:0,ghostClass:"",ghostStyle:{},chosenClass:"",fallbackOnBody:!1,forceFallback:!1,stopPropagation:!1,supportPointer:"PointerEvent"in window&&!u,supportTouch:"ontouchstart"in window,emptyInsertThreshold:5};for(o in i)o in this.options||(this.options[o]=i[o]);for(n in this.container=this.options.fallbackOnBody?document.body:t,this.nativeDraggable=!this.options.forceFallback&&K,this.ghost=new Z(this),this.dragStartTimer=null,this.autoScrollTimer=null,s={},(r=(e=e).group)&&"object"==a(r)||(r={name:r}),s.name=r.name,s.pull=r.pull,s.put=r.put,e.group=s,this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));var r=this.options,e=r.supportPointer,s=r.supportTouch;m(t,e?"pointerdown":s?"touchstart":"mousedown",this._onDrag),Q.push(t),Object.assign(this,$(),(window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)}),{_autoScroll:V(function(t,e){var o,n,i,r,s,a,l,c,h,u,f,d,p,g,m;t.scrollEl&&e.sortableDown&&e.sortableMove&&(o=(n=e.sortableMove).clientX,n=n.clientY,void 0!==o&&void 0!==n&&t.scrollEl!==t.ownerDocument&&(i=(g=t.scrollEl).scrollTop,r=g.scrollLeft,s=g.scrollHeight,g=g.scrollWidth,a=(p=w(t.scrollEl)).top,f=p.right,l=p.bottom,d=p.left,c=p.height,p=p.width,h=(u=t.options).scrollStep,u=u.scrollThreshold,d=0<r&&d<=o&&o<=d+u,p=r+p<g&&o<=f&&f-u<=o,g=i+c<s&&n<=l&&l-u<=n,m={x:r,y:i},(f=0<i&&a<=n&&n<=a+u)?(m.x=d?r-h:p?r+h:r,m.y=i-h):g?(m.x=d?r-h:p?r+h:r,m.y=i+h):d?(m.x=r-h,m.y=i):p&&(m.x=r+h,m.y=i),(f||d||p||g)&&requestAnimationFrame(function(){t.scrollEl.scrollTo(m.x,m.y),t._autoScroll(t,e)})))},10)}))}return(B.prototype={constructor:B,destroy:function(){this.el[S]=null,v(this.el,"pointerdown",this._onDrag),v(this.el,"touchstart",this._onDrag),v(this.el,"mousedown",this._onDrag),this._clearState(),Array.prototype.forEach.call(this.el.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")})},set:function(t,e){this.options[t]=e},get:function(t){return this.options[t]},_onDrag:function(t){var e=this;if(!O&&!this.options.disabled&&!1!==this.options.group.pull){if(/mousedown|pointerdown/.test(t.type)&&0!==t.button)return!0;var o=g(t),n=o.touch,i=o.e,o=o.target;if(!this.nativeDraggable&&u&&o&&"SELECT"===o.tagName.toUpperCase())return!0;if(o===this.el)return!0;this.options.stopPropagation&&t.stopPropagation&&t.stopPropagation();t=this.options.draggable;if("function"==typeof t){var r=t(i);if(!r)return!0;!function(e){var t=document.createElement("div");try{return t.appendChild(e.cloneNode(!0)),1==e.nodeType}catch(t){return e==window||e==document}}(r)||(O=r)}else if("string"==typeof t){if(!q(o,t))return!0}else if(t)throw new Error('draggable expected "function" or "string" but received "'.concat(a(t),'"'));if(!(O=O||D(this.el,o,!0))||O.animated)return!0;n&&(O.style["touch-action"]="none"),C=this.el;r=D(this.el,O),t=r.rect,o=r.offset,r=(k.from={sortable:this,group:this.el,node:O,rect:t,offset:o},this.ghost.distance={x:i.clientX-t.left,y:i.clientY-t.top},this.ghost.initPos={x:i.clientX,y:i.clientY},j.sortableDown=i,m(this.ownerDocument,"dragover",T),m(this.ownerDocument,"mousemove",T),m(this.ownerDocument,"touchmove",T),m(this.ownerDocument,"pointermove",T),m(this.ownerDocument,"pointerup",this._onDrop),m(this.ownerDocument,"touchend",this._onDrop),m(this.ownerDocument,"mouseup",this._onDrop),this.options),o=r.delay,t=r.delayOnTouchOnly;!o||t&&!n||this.nativeDraggable&&(N||h)?this._onStart(i,n):(clearTimeout(this.dragStartTimer),this.dragStartTimer=setTimeout(function(){return e._onStart(i,n)},o))}},_onStart:function(t,e){x=this.el,M=this.options.group,!this.nativeDraggable||e?(this.options.supportPointer?m(this.ownerDocument,"pointermove",this._onMove):m(this.ownerDocument,e?"touchmove":"mousemove",this._onMove),m(this.ownerDocument,"pointercancel",this._onDrop),m(this.ownerDocument,"touchcancel",this._onDrop)):(O.draggable=!0,m(O,"dragend",this),m(x,"dragstart",this._onDragStart));try{document.selection?setTimeout(function(){document.selection.empty()},0):window.getSelection().removeAllRanges()}catch(t){}},_triggerEvent:function(t){M.name===this.options.group.name&&(x=t.rootEl,this.nativeDraggable?(m(this.el,"dragend",this._onDrop),this._onDragOver(t)):this._onMove(t))},_onDragStart:function(t){t.dataTransfer&&(t.dataTransfer.setData("DRAGGABLE_EFFECT",t.target.innerText),t.dataTransfer.effectAllowed="move"),m(this.el,"dragover",this._onDragOver),m(this.el,"dragend",this._onDrop)},_onDragOver:function(t){var e,o,n,i;j.sortableDown&&O&&(this._preventEvent(t),this._onStarted(t,t),t.rootEl&&(o=(e=t).clientX,e=e.clientY,n=o-L.x,i=e-L.y,L.x=o,L.y=e,void 0!==o&&Math.abs(n)<=0&&void 0!==e&&Math.abs(i)<=0||(this._dispatchEvent("onMove",c(c({},k),{},{ghostEl:A,event:t,originalEvent:t})),!this.options.group.put&&C!==this.el||this._onChange(t.target,t,t))))},_onStarted:function(t,e){j.sortableMove=t,A||(A=O.cloneNode(!0),this._dispatchEvent("onDrag",c(c({},k),{},{event:t,originalEvent:e})),this.ghost.init(A,k.from.rect,!this.nativeDraggable),B.ghostEl=A,E(O,this.options.chosenClass,!0),O.style["will-change"]="transform",this.nativeDraggable&&(this._unbindDropEvents(),m(document,"drop",this)),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),u&&_(document.body,"user-select","none"))},_onMove:function(t){var e,o,n=this;j.sortableDown&&O&&(this._preventEvent(t),e=(o=g(t)).e,o=o.target,this._onStarted(e,t),this.ghost.move(e.clientX,e.clientY),t.rootEl&&(this._dispatchEvent("onMove",c(c({},k),{},{ghostEl:A,event:e,originalEvent:t})),!this.options.group.put&&C!==this.el||this._onChange(o,e,t),clearTimeout(this.autoScrollTimer),this.options.autoScroll&&(this.autoScrollTimer=setTimeout(function(){return n._autoScroll(n,j)},0))))},_onChange:z(function(t,e,o){var n,i,r,s,a,l;O&&(!function(t,e){for(var o=t.lastElementChild;o&&(o===B.ghostEl||"none"===_(o,"display")||e&&!q(o,e));)o=o.previousElementSibling;return o}(this.el)?(k.to={sortable:this,group:this.el,node:O,rect:w(O),offset:b(O)},k.from.sortable._dispatchEvent("onRemove",c(c({},k),{},{event:e,originalEvent:o})),this._dispatchEvent("onAdd",c(c({},k),{},{event:e,originalEvent:o})),this.el.appendChild(O),k.from.sortable=this,k.from.group=this.el):(n=(t=D(x,t)).el,a=t.rect,t=t.offset,n&&!n.animated&&n!==O&&(P=n,k.to={sortable:this,group:this.el,node:P,rect:a,offset:t},n=e.clientX,i=e.clientY,l=a.left,r=a.right,s=a.top,a=a.bottom,l<n&&n<r&&s<i&&i<a&&(this._captureAnimationState(O,P),!1===H(O,x)?(k.from.sortable._dispatchEvent("onRemove",c(c({},k),{},{event:e,originalEvent:o})),this._dispatchEvent("onAdd",c(c({},k),{},{event:e,originalEvent:o})),this.el.insertBefore(O,P)):(this._dispatchEvent("onChange",c(c({},k),{},{event:e,originalEvent:o})),(l=b(O)).top<t.top||l.left<t.left?this.el.insertBefore(O,P.nextSibling):this.el.insertBefore(O,P)),k.from.sortable=this,k.from.group=this.el,this._rangeAnimate()))))},5),_onDrop:function(t){var e,o;this._unbindDragEvents(),this._unbindMoveEvents(),this._unbindDropEvents(),this._preventEvent(t),this.dragStartTimer&&clearTimeout(this.dragStartTimer),O&&(this.nativeDraggable&&v(O,"dragend",this),e=g(t).touch,E(O,this.options.chosenClass,!1),this.nativeDraggable&&(O.draggable=!1),e&&(O.style["touch-action"]=""),O.style["will-change"]="",j.sortableDown&&j.sortableMove&&(k.to.offset=b(O),k.to.rect=w(O),e=k.from.offset,o=k.to.offset,e=e.top!==o.top||e.left!==o.left,this._dispatchEvent("onDrop",{changed:e,event:t,originalEvent:t}))),u&&_(document.body,"user-select",""),this.ghost.destroy(k.to.rect),this._clearState()},_preventEvent:function(t){this.options.stopPropagation&&t.stopPropagation&&t.stopPropagation(),void 0!==t.preventDefault&&t.cancelable&&t.preventDefault()},_dispatchEvent:function(t,e){t=this.options[t];"function"==typeof t&&t(e)},_clearState:function(){j=new G,k.destroy(),O=P=A=C=M=B.ghostEl=null,L={x:0,y:0}},_unbindDragEvents:function(){this.nativeDraggable&&(v(this.el,"dragstart",this._onDragStart),v(this.el,"dragover",this._onDragOver),v(this.el,"dragend",this._onDrop),v(document,"drop",this))},_unbindMoveEvents:function(){v(this.ownerDocument,"pointermove",this._onMove),v(this.ownerDocument,"touchmove",this._onMove),v(this.ownerDocument,"mousemove",this._onMove),v(this.ownerDocument,"pointermove",T),v(this.ownerDocument,"touchmove",T),v(this.ownerDocument,"mousemove",T),v(this.ownerDocument,"dragover",T)},_unbindDropEvents:function(){v(this.ownerDocument,"pointerup",this._onDrop),v(this.ownerDocument,"pointercancel",this._onDrop),v(this.ownerDocument,"touchend",this._onDrop),v(this.ownerDocument,"touchcancel",this._onDrop),v(this.ownerDocument,"mouseup",this._onDrop)}}).utils={getRect:w,getOffset:b,debounce:z,throttle:V},B});

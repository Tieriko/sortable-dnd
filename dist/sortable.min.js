!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Sortable=e()}(this,function(){"use strict";function L(e,t){var o,n=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)),n}function h(n){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?L(Object(i),!0).forEach(function(t){var e,o;e=n,o=i[t=t],(t=H(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H(n.key),n)}}function I(t,e,o){e&&Y(t.prototype,e),o&&Y(t,o),Object.defineProperty(t,"prototype",{writable:!1})}function R(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var o;if(t)return"string"==typeof t?W(t,e):"Map"===(o="Object"===(o=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?W(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function H(t){t=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);if("object"!=typeof(o=o.call(t,e||"default")))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==typeof t?t:String(t)}var G,z={capture:!1,passive:!1},q=/\s+/g,e={start:["pointerdown","touchstart","mousedown"],move:["pointermove","touchmove","mousemove"],end:["pointerup","pointercancel","touchend","touchcancel","mouseup"]},U=(G=!1,document.addEventListener("checkIfSupportPassive",null,{get passive(){return G=!0}}),G);function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var o,p=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),V=t(/Edge/i),l=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),Z="undefined"==typeof window||"undefined"==typeof document?"":(o=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],"ms"!==(o=(Array.prototype.slice.call(o).join("").match(/-(moz|webkit|ms)-/)||""===o.OLink&&["","o"])[1])?o&&o.length?o[0].toUpperCase()+o.substr(1):"":"ms");function $(e){if(e){var t=document.createElement("div");try{return t.appendChild(e.cloneNode(!0)),1==e.nodeType}catch(t){return e==window||e==document}}}function r(t,e){t.style["".concat(Z,"Transition")]=e?"none"===e?"none":"".concat(e):""}function a(t,e){t.style["".concat(Z,"Transform")]=e?"".concat(e):""}function J(t){var e=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,t=e||t;return{touch:e,e:t,target:e?document.elementFromPoint(t.clientX,t.clientY):t.target}}function u(t,e,o){window.addEventListener?t.addEventListener(e,o,!(!U&&p)&&z):window.attachEvent&&t.attachEvent("on"+e,o)}function n(t,e,o){window.removeEventListener?t.removeEventListener(e,o,!(!U&&p)&&z):window.detachEvent&&t.detachEvent("on"+e,o)}function d(t){for(var e={top:0,left:0,height:0,width:0},o=(e.height=t.offsetHeight,e.width=t.offsetWidth,e.top=t.offsetTop,e.left=t.offsetLeft,t.offsetParent);null!==o;)e.top+=o.offsetTop,e.left+=o.offsetLeft,o=o.offsetParent;return e}function K(){var t=document.scrollingElement;return!t||t.contains(document.body)?document:t}function m(t){var e,o,n,i,r,a,s,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=2<arguments.length?arguments[2]:void 0;if(t.getBoundingClientRect||t===window){if(t!==window&&t.parentNode&&t!==K()){if(o=(e=t.getBoundingClientRect()).top,n=e.left,i=e.bottom,r=e.right,a=e.height,s=e.width,l.parent&&t.parentNode!==t.ownerDocument.body)for(var c,f=t.parentNode;f&&f.getBoundingClientRect&&f!==t.ownerDocument.body;){if((c=f.getBoundingClientRect()).height<a)return o=c.top,n=c.left,i=c.bottom,r=c.right,a=c.height,{top:o,left:n,bottom:i,right:r,width:s=c.width,height:a};f=f.parentNode}}else n=o=0,i=window.innerHeight,r=window.innerWidth,a=window.innerHeight,s=window.innerWidth;if((l.block||l.relative)&&t!==window&&(u=u||t.parentNode,!p))do{if(u&&u.getBoundingClientRect&&("none"!==v(u,"transform")||l.relative&&"static"!==v(u,"position"))){var h=u.getBoundingClientRect();o-=h.top+parseInt(v(u,"border-top-width")),n-=h.left+parseInt(v(u,"border-left-width")),i=o+e.height,r=n+e.width;break}}while(u=u.parentNode);return{top:o,left:n,bottom:i,right:r,width:s,height:a}}}function g(t,e,o){var n=R(Array.from(t.children)),t=n.indexOf(e);if(-1<t)return o?n[t]:{index:t,el:n[t],rect:m(n[t]),offset:d(n[t])};for(var i=0;i<n.length;i++)if(function(t,e){var o;if(t&&e)for(o=t.parentNode;o;){if(e===o)return 1;o=o.parentNode}return}(e,n[i]))return o?n[i]:{index:i,el:n[i],rect:m(n[i]),offset:d(n[i])};return o?null:{index:-1,el:null,rect:{},offset:{}}}function Q(t,e){for(var o=t.lastElementChild;o&&(o===B.ghost||"none"===v(o,"display")||e&&!tt(o,e));)o=o.previousElementSibling;return o}function s(t,e,o){var n;t&&e&&(t.classList?t.classList[o?"add":"remove"](e):(n=(" "+t.className+" ").replace(q," ").replace(" "+e+" "," "),t.className=(n+(o?" "+e:"")).replace(q," ")))}function tt(t,e){if(e&&(">"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function et(t,e){return t.top!==e.top||t.left!==e.left}function v(t,e,o){var n=t&&t.style;if(n){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];n[e=e in n||-1!==e.indexOf("webkit")?e:"-webkit-"+e]=o+("string"==typeof o?"":"px")}}var c="Sortable"+Date.now(),ot=(window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),function(){function t(){X(this,t),this.autoScrollAnimationFrame=null,this.speed={x:10,y:10}}return I(t,[{key:"clear",value:function(){null!=this.autoScrollAnimationFrame&&(cancelAnimationFrame(this.autoScrollAnimationFrame),this.autoScrollAnimationFrame=null)}},{key:"update",value:function(t,e,o,n){var i=this;o&&n&&this.autoScroll(t,e,n),cancelAnimationFrame(this.autoScrollAnimationFrame),this.autoScrollAnimationFrame=requestAnimationFrame(function(){return i.update(t,e,o,n)})}},{key:"autoScroll",value:function(t,e,o){var n,i,r,a,s,l,u,c,f,h,p,d;t&&(n=o.clientX,o=o.clientY,void 0!==n)&&void 0!==o&&(f=m(t))&&(p=t.scrollTop,i=t.scrollLeft,r=t.scrollHeight,h=t.scrollWidth,t.clientHeight,t.clientWidth,a=f.top,s=f.right,l=f.bottom,u=f.left,d=f.height,c=0<p&&a<=o&&o<=a+e,f=i+f.width<h&&n<=s&&s-e<=n,h=p+d<r&&o<=l&&l-e<=o,p=(d=p=0)<i&&u<=n&&n<=u+e?Math.floor(Math.max(-1,(n-u)/e-1)*this.speed.x):f?Math.ceil(Math.min(1,(n-s)/e+1)*this.speed.x):0,(d=c?Math.floor(Math.max(-1,(o-a)/e-1)*this.speed.y):h?Math.ceil(Math.min(1,(o-l)/e+1)*this.speed.y):0)&&(t.scrollTop+=d),p)&&(t.scrollLeft+=p)}}]),t}());function nt(){var i=[];return{_captureAnimationState:function(t,e){var o=R(Array.from(this.el.children)),e=(t=t,e=e,t=(n=o).indexOf(t),n=n.indexOf(e),t<n?{start:t,end:n}:{start:n,end:t}),n=e.start,t=e.end;n<(i.length=0)&&(n=t,t=Math.min(o.length-1,100)),t<0&&(t=Math.min(o.length-1,100)),o.slice(n,t+1).forEach(function(t){i.push({target:t,rect:m(t)})})},_animate:function(){var o=this;i.forEach(function(t){var e=t.target,t=t.rect;o._excuteAnimation(e,t,o.options.animation)})},_excuteAnimation:function(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:150,n=m(t),i=e.left-n.left,e=e.top-n.top;r(t,"none"),a(t,"translate3d(".concat(i,"px, ").concat(e,"px, 0)")),t.offsetWidth,r(t,"".concat(o,"ms")),a(t,"translate3d(0px, 0px, 0px)"),clearTimeout(t.animated),t.animated=setTimeout(function(){r(t,""),a(t,""),t.animated=null},o)}}}var i={sortable:null,group:null,nodes:[]},b={},y=new(function(){function t(){X(this,t),this.from=h({},i),this.to=h({},i)}return I(t,[{key:"destroy",value:function(){this.from=h({},i),this.to=h({},i)}}]),t}()),w=function(){return{from:h({},y.from),to:h({},y.to)}},it=function(t,o){return!!t.find(function(e){return et(o.find(function(t){return t.node===e.node}).offset,e.offset)})};function rt(){return{_setMultiElements:function(t,e){var o,n=this,i=this.options.draggable;if("function"==typeof i){var i=i(t);if(!i)return;$(i)&&(o=i)}(o=o||g(this.el,t.target,!0))&&(b[this.options.group.name]||(b[this.options.group.name]=[]),s(o,this.options.selectedClass,b[this.options.group.name].indexOf(o)<0),i={sortable:this,group:e,target:o,event:t,originalEvent:t},b[this.options.group.name].indexOf(o)<0?(b[this.options.group.name].push(o),this._dispatchEvent("onSelect",i)):(b[this.options.group.name].splice(b[this.options.group.name].indexOf(o),1),this._dispatchEvent("onDeselect",i)),b[this.options.group.name].forEach(function(t){var e;t.sortableIndex=(e=n.el,(t=t)&&t.parentNode?R(Array.from(e.children)).indexOf(t):-1)}),b[this.options.group.name].sort(function(t,e){return t.sortableIndex-e.sortableIndex}))},_allowMultiDrag:function(t){var e;return this.options.multiple&&b[this.options.group.name]&&b[this.options.group.name].length&&-1<(null==(e=b[this.options.group.name])?void 0:e.indexOf(t))},_getMultiGhostElement:function(){var n=document.createElement("div");return b[this.options.group.name].forEach(function(t,e){var t=t.cloneNode(!0),o=4*e+4;t.style="opacity: ".concat(0===e?1:.5,";position: absolute;z-index: ").concat(e,";bottom: -").concat(o,"px;right: -").concat(o,"px;width: 100%;height: 100%;"),n.appendChild(t)}),n},_setMultiDiffer:function(t){y[t]={sortable:this,group:this.el,nodes:b[this.options.group.name].map(function(t){return{node:t,rect:m(t),offset:d(t)}})}},_onMultiDrag:function(){this._setMultiDiffer("from")},_onMultiStarted:function(t){var e=t.e,o=t.evt,n=t.dragEl,i=(this._dispatchEvent("onDrag",h(h({},w()),{},{event:e,originalEvent:o})),this._captureAnimationState(n),b[this.options.group.name].forEach(function(t){t!==n&&v(t,"position","absolute")}),m(n,{relative:!0}));b[this.options.group.name].forEach(function(t){var e,o;t!==n&&(o=i,v(e=t,"position","absolute"),v(e,"top",o.top),v(e,"left",o.left),v(t,"display","none"))}),this._animate()},_onMultiMove:function(t,e){var o,n=t.e,i=t.evt,r=t.dragEl,t=t.ghostEl;this._dispatchEvent("onMove",h(h({},w()),{},{ghostEl:t,event:n,originalEvent:i})),e&&(o=(t=n).pageX||t.pageY?{top:t.pageY,left:t.pageX}:t.clientX||t.clientY?{top:t.clientY+document.documentElement.scrollTop+document.body.scrollTop,left:t.clientX+document.documentElement.scrollLeft+document.body.scrollLeft}:void 0,b[this.options.group.name].forEach(function(t){t!==r&&(v(t,"top",o.top),v(t,"left",o.left))}))},_onMultiChange:function(t){var e=t.dragEl,o=t.rootEl,n=t.target,i=t.e,t=t.evt;if(y.from.group){if(!Q(o)||n===o&&y.from.group!==o)y.from.sortable._captureAnimationState(e,e),b[this.options.group.name].forEach(function(t){o.appendChild(t)}),this._setMultiDiffer("to"),y.from.sortable._dispatchEvent("onRemove",h(h({},w()),{},{event:i,originalEvent:t})),this._dispatchEvent("onAdd",h(h({},w()),{},{event:i,originalEvent:t})),y.from.sortable._animate();else{var n=g(o,n),r=n.el,a=n.rect,n=n.offset;if(!r||r.animated||r===e)return;this._setMultiDiffer("to");var s=i.clientX,l=i.clientY,u=a.left,c=a.right,f=a.top,a=a.bottom;u<s&&s<c&&f<l&&l<a&&(this._captureAnimationState(e,r),y.from.group!==y.to.group?(y.from.sortable._captureAnimationState(e,r),b[this.options.group.name].forEach(function(t){o.insertBefore(t,r)}),y.from.sortable._dispatchEvent("onRemove",h(h({},w()),{},{event:i,originalEvent:t})),this._dispatchEvent("onAdd",h(h({},w()),{},{event:i,originalEvent:t})),y.from.sortable._animate()):((u=d(e)).top<n.top||u.left<n.left?b[this.options.group.name].forEach(function(t){o.insertBefore(t,r.nextSibling)}):b[this.options.group.name].forEach(function(t){o.insertBefore(t,r)}),this._dispatchEvent("onChange",h(h({},w()),{},{event:i,originalEvent:t}))),this._animate())}y.from.sortable=this,y.from.group=o}},_onMultiDrop:function(t){for(var e,o=t.fromGroup,n=t.fromSortable,i=t.dragEl,r=t.rootEl,t=t.evt,a=(this._captureAnimationState(i),b[this.options.group.name].forEach(function(t){t!==i&&(v(t=t,"display",""),v(t,"position",""),v(t,"top",""),v(t,"left",""))}),b[this.options.group.name].indexOf(i)),s=0;s<b[this.options.group.name].length;s++)s<a?r.insertBefore(b[this.options.group.name][s],i):(e=0<s?b[this.options.group.name][s-1]:i,r.insertBefore(b[this.options.group.name][s],e.nextSibling));y.to.nodes=b[this.options.group.name].map(function(t){return{node:t,rect:m(t),offset:d(t)}}),y.to.group||(y.to.group=this.el,y.to.sortable=this),y.from.group=o,y.from.sortable=n;var l=it(y.from.nodes,y.to.nodes),l=h(h({},w()),{},{changed:l,event:t,originalEvent:t});y.to.group!==o&&n._dispatchEvent("onDrop",l),this._dispatchEvent("onDrop",l),this._animate()}}}function at(t){if(_){var e=t=t.touches?t.touches[0]:t,o=e.clientX,e=e.clientY,n=st(o,e);if(n){var i,r={};for(i in t)r[i]=t[i];r.target=document.elementFromPoint(o,e),E=n,r.preventDefault=void 0,r.stopPropagation=void 0,E!==O&&n[c]._onMove(r)}}}function st(i,r){var a;return j.some(function(t){var e,o,n=t[c].options.emptyInsertThreshold;if(n)return o=m(t,{parent:!0}),e=i>=o.left-n&&i<=o.right+n,o=r>=o.top-n&&r<=o.bottom+n,e&&o?a=t:void 0}),a}function f(){return{from:h({},N.from),to:h({},N.to)}}function lt(t){return h(h({},t),{},{rootEl:E,dragEl:_,ghostEl:D,fromSortable:T,fromGroup:O,activeGroup:C})}var E,_,S,D,x,M,O,A,C,T,ut,P,ct={sortable:null,group:null,node:null,rect:{},offset:{}},j=[],N=new(function(){function t(){X(this,t),this.from=h({},ct),this.to=h({},ct)}return I(t,[{key:"destroy",value:function(){this.from=h({},ct),this.to=h({},ct)}}]),t}()),ft={x:0,y:0},k={x:0,y:0};function B(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));(t[c]=this).el=t,this.ownerDocument=t.ownerDocument,this.scrollEl=function(t,e){if(t&&t.getBoundingClientRect){var o=t,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var i=v(o);if(o.clientWidth<o.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!o.getBoundingClientRect||o===document.body)return K();if(n||e)return o;n=!0}}}while(o=o.parentNode)}return K()}(t,!0),this.options=e=Object.assign({},e);var o,n,i,r={group:"",animation:150,multiple:!1,draggable:void 0,onDrag:void 0,onMove:void 0,onDrop:void 0,onChange:void 0,autoScroll:!0,scrollThreshold:25,delay:0,delayOnTouchOnly:!1,disabled:!1,ghostClass:"",ghostStyle:{},chosenClass:"",selectedClass:"",fallbackOnBody:!1,stopPropagation:!1,supportPointer:"onpointerdown"in window&&!l,supportTouch:"ontouchstart"in window,emptyInsertThreshold:5};for(o in r)o in this.options||(this.options[o]=r[o]);for(i in e=e,a="group_"+Number(Math.random().toString().slice(-3)+Date.now()).toString(32),n={},(s=e.group)&&"object"==F(s)||(s={name:s,pull:!0,put:!0}),n.name=s.name||a,n.pull=s.pull,n.put=s.put,e.group=n,this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));var a=this.options,s=a.supportPointer,e=a.supportTouch;u(t,s?"pointerdown":e?"touchstart":"mousedown",this._onDrag),j.push(t),Object.assign(this,nt()),ut=new ot,this.options.multiple&&Object.assign(this,rt())}return(B.prototype={constructor:B,destroy:function(){this._dispatchEvent("destroy",this),this.el[c]=null;for(var t=0;t<e.start.length;t++)n(this.el,e.start[t],this._onDrag);this._clearState(),clearTimeout(P),j.splice(j.indexOf(this.el),1),0==j.length&&(ut=null),this.el=null},_onDrag:function(t){var e=this;if(!_&&!this.options.disabled&&this.options.group.pull){if(/mousedown|pointerdown/.test(t.type)&&0!==t.button)return!0;var t=J(t),o=t.touch,n=t.e,t=t.target;if(l&&t&&"SELECT"===t.tagName.toUpperCase())return!0;if(t===this.el)return!0;var i=this.options.draggable;if("function"==typeof i){var r=i(n);if(!r)return!0;$(r)&&(_=r)}else if("string"==typeof i){if(!tt(t,i))return!0}else if(i)throw new Error('draggable expected "function" or "string" but received "'.concat(F(i),'"'));if(!(_=_||g(this.el,t,!0))||_.animated)return!0;o&&(_.style["touch-action"]="none"),O=this.el,(A=(T=this).options.multiple&&this._allowMultiDrag(_))&&this._onMultiDrag();r=g(this.el,_),i=r.rect,t=r.offset,r=(N.from={sortable:this,group:this.el,node:_,rect:i,offset:t},ft={x:n.clientX-i.left,y:n.clientY-i.top},x=n,this.options.supportPointer?u(this.ownerDocument,"pointermove",at):u(this.ownerDocument,o?"touchmove":"mousemove",at),this.options),t=r.delay,i=r.delayOnTouchOnly;!t||i&&!o||V||p?this._onStart(n,o):(clearTimeout(P),P=setTimeout(function(){return e._onStart(n,o)},t))}},_onStart:function(t,e){E=this.el,C=this.options.group,this.options.supportPointer?(u(this.ownerDocument,"pointermove",this._onMove),u(this.ownerDocument,"pointerup",this._onDrop),u(this.ownerDocument,"pointercancel",this._onDrop)):e?(u(this.ownerDocument,"touchmove",this._onMove),u(this.ownerDocument,"touchend",this._onDrop),u(this.ownerDocument,"touchcancel",this._onDrop)):(u(this.ownerDocument,"mousemove",this._onMove),u(this.ownerDocument,"mouseup",this._onDrop));try{document.selection?setTimeout(function(){document.selection.empty()},0):window.getSelection().removeAllRanges()}catch(t){}},_onTrulyStarted:function(t,e){M||(A?this._onMultiStarted(lt({e:t,evt:e})):this._dispatchEvent("onDrag",h(h({},f()),{},{event:t,originalEvent:e})),this._appendGhost(),s(_,this.options.chosenClass,!0),_.style["will-change"]="transform",l&&v(document.body,"user-select","none")),M=t},_onMove:function(t){var e,o,n,i;this._preventEvent(t),x&&_&&(o=(e=t).clientX,e=e.clientY,i=o-k.x,n=e-k.y,k.x=o,k.y=e,void 0!==o&&void 0!==e&&Math.abs(i)<=0&&Math.abs(n)<=0||(e=(o=J(t)).e,i=o.target,this._onTrulyStarted(e,t),n=t.clientX-x.clientX,o=t.clientY-x.clientY,r(D,"none"),a(D,"translate3d(".concat(n,"px, ").concat(o,"px, 0)")),n=this._allowPut(),A?this._onMultiMove(lt({e:e,evt:t}),n):this._dispatchEvent("onMove",h(h({},f()),{},{ghostEl:D,event:e,originalEvent:t})),n&&this._triggerChangeEvent(i,e,t),n=(o=this.options).autoScroll,i=o.scrollThreshold,n&&ut.update(this.el,i,x,M)))},_allowPut:function(){var t;return O===this.el||!!this.options.group.put&&(t=this.options.group.name,C.name)&&t&&C.name===t},_appendGhost:function(){if(!D){var t,e=this.options,o=e.fallbackOnBody,n=e.ghostClass,e=e.ghostStyle,i=void 0===e?{}:e,e=o?document.body:this.el,o=m(_,{block:!0},e);for(t in s(D=A?this._getMultiGhostElement():_.cloneNode(!0),n,!0),v(D,"box-sizing","border-box"),v(D,"margin",0),v(D,"top",o.top),v(D,"left",o.left),v(D,"width",o.width),v(D,"height",o.height),v(D,"opacity","0.8"),v(D,"position","fixed"),v(D,"zIndex","100000"),v(D,"pointerEvents","none"),i)v(D,t,i[t]);r(D,"none"),a(D,"translate3d(0px, 0px, 0px)"),e.appendChild(D);n=ft.x/parseInt(D.style.width)*100,o=ft.y/parseInt(D.style.height)*100;v(D,"transform-origin","".concat(n,"% ").concat(o,"%")),v(D,"transform","translateZ(0)"),B.ghost=D}},_triggerChangeEvent:function(t,e,o){_&&(A?this._onMultiChange(lt({target:t,e:e,evt:o})):this._onChange(t,e,o))},_onChange:function(t,e,o){if(N.from.group){if(!Q(E)||t===E&&N.from.group!==E)N.from.sortable._captureAnimationState(_,_),N.to={sortable:this,group:E,node:_,rect:m(_),offset:d(_)},N.from.sortable._dispatchEvent("onRemove",h(h({},f()),{},{event:e,originalEvent:o})),this._dispatchEvent("onAdd",h(h({},f()),{},{event:e,originalEvent:o})),E.appendChild(_),N.from.sortable._animate();else{var t=g(E,t),n=t.el,i=t.rect,t=t.offset;if(!n||n.animated||n===_)return;S=n,N.to={sortable:this,group:E,node:S,rect:i,offset:t};var n=e.clientX,r=e.clientY,a=i.left,s=i.right,l=i.top,i=i.bottom;a<n&&n<s&&l<r&&r<i&&(this._captureAnimationState(_,S),N.from.group!==N.to.group?(N.from.sortable._captureAnimationState(_,S),N.from.sortable._dispatchEvent("onRemove",h(h({},f()),{},{event:e,originalEvent:o})),this._dispatchEvent("onAdd",h(h({},f()),{},{event:e,originalEvent:o})),E.insertBefore(_,S),N.from.sortable._animate()):(this._dispatchEvent("onChange",h(h({},f()),{},{event:e,originalEvent:o})),(a=d(_)).top<t.top||a.left<t.left?E.insertBefore(_,S.nextSibling):E.insertBefore(_,S)),this._animate())}N.from.sortable=this,N.from.group=E}},_onDrop:function(t){var e;this._unbindMoveEvents(),this._unbindDropEvents(),this._preventEvent(t),ut.clear(),clearTimeout(P),_&&(e=J(t).touch,s(_,this.options.chosenClass,!1),e&&(_.style["touch-action"]=""),_.style["will-change"]=""),_&&x&&M?(A?this._onMultiDrop(lt({evt:t})):(N.to.rect=m(_),N.to.offset=d(_),N.to.group||(N.to.group=this.el,N.to.sortable=this),N.from.group=O,N.from.sortable=T,e=et(N.from.offset,N.to.offset),e=h(h({},f()),{},{changed:e,event:t,originalEvent:t}),N.to.group!==O&&T._dispatchEvent("onDrop",e),this._dispatchEvent("onDrop",e)),l&&v(document.body,"user-select","")):this.options.multiple&&this._setMultiElements(t,this.el),this._clearState()},_preventEvent:function(t){void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation&&t.stopPropagation()},_dispatchEvent:function(t,e){t=this.options[t];"function"==typeof t&&t(e)},_clearState:function(){D&&D.parentNode&&D.parentNode.removeChild(D),_=S=D=x=M=A=O=C=T=P=B.ghost=null,ft=k={x:0,y:0},N.destroy()},_unbindMoveEvents:function(){for(var t=0;t<e.move.length;t++)n(this.ownerDocument,e.move[t],this._onMove),n(this.ownerDocument,e.move[t],at)},_unbindDropEvents:function(){for(var t=0;t<e.end.length;t++)n(this.ownerDocument,e.end[t],this._onDrop)}}).utils={getRect:m,getOffset:d},B});

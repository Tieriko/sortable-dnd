!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Sortable=e()}(this,function(){"use strict";function B(e,t){var o,n=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)),n}function c(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(t){var e,o;e=n,o=r[t=t],t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function W(t,e,o){e&&R(t.prototype,e),o&&R(t,o),Object.defineProperty(t,"prototype",{writable:!1})}function X(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var e,a=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Y=t(/Edge/i),l=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),H=t(/iP(ad|od|hone)/i),F=t(/chrome/i)&&t(/android/i),z={capture:!1,passive:!1},q=/\s+/g,r=["-webkit-transition","-moz-transition","-ms-transition","-o-transition","transition"],G=["-webkit-transform","-moz-transform","-ms-transform","-o-transform","transform"],V=(e=!1,document.addEventListener("checkIfSupportPassive",null,{get passive(){return e=!0}}),e);function i(e,o){o?"none"===o?r.forEach(function(t){return g(e,t,"none")}):r.forEach(function(t){return g(e,t,"".concat(t.split("transition")[0],"transform ").concat(o))}):r.forEach(function(t){return g(e,t,"")})}function u(e,o){o?G.forEach(function(t){return g(e,t,"".concat(t.split("transform")[0]).concat(o))}):G.forEach(function(t){return g(e,t,"")})}function h(t){var e=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,t=e||t;return{touch:e,e:t,target:e?document.elementFromPoint(t.clientX,t.clientY):t.target}}function f(t,e,o){window.addEventListener?t.addEventListener(e,o,!(!V&&a)&&z):window.attachEvent&&t.attachEvent("on"+e,o)}function o(t,e,o){window.removeEventListener?t.removeEventListener(e,o,!(!V&&a)&&z):window.detachEvent&&t.detachEvent("on"+e,o)}function p(t){for(var e={top:0,left:0,height:0,width:0},o=(e.height=t.offsetHeight,e.width=t.offsetWidth,e.top=t.offsetTop,e.left=t.offsetLeft,t.offsetParent);null!==o;)e.top+=o.offsetTop,e.left+=o.offsetLeft,o=o.offsetParent;return e}function d(){var t=document.scrollingElement;return!t||t.contains(document.body)?document:t}function v(t,e){if(t.getBoundingClientRect||t===window){var o,n={top:0,left:0,bottom:0,right:0,height:0,width:0};if(t!==window&&t.parentNode&&t!==d()){if(o=t.getBoundingClientRect(),n.top=o.top,n.left=o.left,n.bottom=o.bottom,n.right=o.right,n.height=o.height,n.width=o.width,e&&t.parentNode!==t.ownerDocument.body)for(var r,i=t.parentNode;i&&i.getBoundingClientRect&&i!==t.ownerDocument.body;){if((r=i.getBoundingClientRect()).height<n.height)return n.top=r.top,n.left=r.left,n.bottom=r.bottom,n.right=r.right,n.height=r.height,n.width=r.width,n;i=i.parentNode}}else n.top=0,n.left=0,n.bottom=window.innerHeight,n.right=window.innerWidth,n.height=window.innerHeight,n.width=window.innerWidth;return n}}function m(t,e,o){var n=X(Array.from(t.children)),t=n.indexOf(e);if(-1<t)return o?n[t]:{index:t,el:n[t],rect:v(n[t]),offset:p(n[t])};for(var r=0;r<n.length;r++)if(function(t,e){var o;if(t&&e)for(o=t.parentNode;o;){if(e===o)return 1;o=o.parentNode}return}(e,n[r]))return o?n[r]:{index:r,el:n[r],rect:v(n[r]),offset:p(n[r])};return o?null:{index:-1,el:null,rect:{},offset:{}}}function U(t,e,o){var n;t&&e&&(t.classList?t.classList[o?"add":"remove"](e):(n=(" "+t.className+" ").replace(q," ").replace(" "+e+" "," "),t.className=(n+(o?" "+e:"")).replace(q," ")))}function Z(t,e){if(e&&(">"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function g(t,e,o){var n=t&&t.style;if(n){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];n[e=e in n||-1!==e.indexOf("webkit")?e:"-webkit-"+e]=o+("string"==typeof o?"":"px")}}function $(o,n){var r=null;return function(){var t=this,e=arguments;r=r||setTimeout(function(){r=null,o.apply(t,e)},n)}}var b="Sortable"+Date.now();function J(){var r=[];return{_captureAnimationState:function(t,e){var o=X(Array.from(this.el.children)),e=(t=t,e=e,t=(n=o).indexOf(t),n=n.indexOf(e),t<n?{start:t,end:n}:{start:n,end:t}),n=e.start,t=e.end;n<(r.length=0)&&(n=t,t=Math.min(o.length-1,100)),o.slice(n,t+1).forEach(function(t){r.push({target:t,rect:v(t)})})},_rangeAnimate:function(){var o=this;r.forEach(function(t){var e=t.target,t=t.rect;o._animate(e,t,o.options.animation)})},_animate:function(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:150,n=v(t),r=e.left-n.left,e=e.top-n.top;i(t,"none"),u(t,"translate3d(".concat(r,"px, ").concat(e,"px, 0)")),t.offsetWidth,i(t,"".concat(o,"ms")),u(t,"translate3d(0px, 0px, 0px)"),clearTimeout(t.animated),t.animated=setTimeout(function(){i(t,""),u(t,""),t.animated=null},o)}}}function w(t){if(_){var e=t=t.touches?t.touches[0]:t,o=e.clientX,e=e.clientY,n=K(o,e);if(n){var r,i={};for(r in t)i[r]=t[r];i.target=document.elementFromPoint(o,e),i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[b]._triggerEvent(i)}}}function K(r,i){var a;return M.some(function(t){var e,o,n=t[b].options.emptyInsertThreshold;if(n)return o=v(t,!0),e=r>=o.left-n&&r<=o.right+n,o=i>=o.top-n&&i<=o.bottom+n,e&&o?a=t:void 0}),a}function Q(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function y(){return{from:c({},j.from),to:c({},j.to)}}var D,_,E,S,x,T,O,P,A,tt=function(){function t(){I(this,t),this.sortableDown=void 0,this.sortableMove=void 0}return W(t,[{key:"destroy",value:function(){this.sortableDown=void 0,this.sortableMove=void 0}}]),t}(),et=function(){function t(){I(this,t),this.from={sortable:null,group:null,node:null,rect:{},offset:{}},this.to={sortable:null,group:null,node:null,rect:{},offset:{}}}return W(t,[{key:"destroy",value:function(){this.from={sortable:null,group:null,node:null,rect:{},offset:{}},this.to={sortable:null,group:null,node:null,rect:{},offset:{}}}}]),t}(),ot="undefined"!=typeof document&&!F&&!H&&"draggable"in document.createElement("div"),M=[],C=new tt,j=new et,k={x:0,y:0},N={x:0,y:0};function L(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));(t[b]=this).el=t,this.scrollEl=function(t,e){if(!t||!t.getBoundingClientRect)return d();var o=t,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var r=g(o);if(o.clientWidth<o.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!o.getBoundingClientRect||o===document.body)return d();if(n||e)return o;n=!0}}}while(o=o.parentNode);return d()}(t,!0),this.options=e=Object.assign({},e),this.ownerDocument=t.ownerDocument;var o,n,r={group:"",animation:150,draggable:void 0,onDrag:void 0,onMove:void 0,onDrop:void 0,onChange:void 0,autoScroll:!0,scrollStep:5,scrollThreshold:15,delay:0,delayOnTouchOnly:!1,disabled:!1,ghostClass:"",ghostStyle:{},chosenClass:"",fallbackOnBody:!1,forceFallback:!1,stopPropagation:!1,supportPointer:"PointerEvent"in window&&!l,supportTouch:"ontouchstart"in window,emptyInsertThreshold:5};for(o in r)o in this.options||(this.options[o]=r[o]);for(n in this.nativeDraggable=!this.options.forceFallback&&ot,a={},(i=(e=e).group)&&"object"==s(i)||(i={name:i,pull:!0,put:!0}),a.name=i.name,a.pull=i.pull,a.put=i.put,e.group=a,this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));var i=this.options,e=i.supportPointer,a=i.supportTouch;f(t,e?"pointerdown":a?"touchstart":"mousedown",this._onDrag),M.push(t),Object.assign(this,J(),(window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)}),{_autoScroll:$(function(t,e){var o,n,r,i,a,s,l,c,u,h,f,p,d,m,g;t.scrollEl&&e.sortableDown&&e.sortableMove&&(o=(n=e.sortableMove).clientX,n=n.clientY,void 0!==o&&void 0!==n&&t.scrollEl!==t.ownerDocument&&(r=(m=t.scrollEl).scrollTop,i=m.scrollLeft,a=m.scrollHeight,m=m.scrollWidth,s=(d=v(t.scrollEl)).top,f=d.right,l=d.bottom,p=d.left,c=d.height,d=d.width,u=(h=t.options).scrollStep,h=h.scrollThreshold,p=0<i&&p<=o&&o<=p+h,d=i+d<m&&o<=f&&f-h<=o,m=r+c<a&&n<=l&&l-h<=n,g={x:i,y:r},(f=0<r&&s<=n&&n<=s+h)?(g.x=p?i-u:d?i+u:i,g.y=r-u):m?(g.x=p?i-u:d?i+u:i,g.y=r+u):p?(g.x=i-u,g.y=r):d&&(g.x=i+u,g.y=r),(f||p||d||m)&&requestAnimationFrame(function(){t.scrollEl.scrollTo(g.x,g.y),t._autoScroll(t,e)})))},10)}))}return(L.prototype={constructor:L,destroy:function(){this._dispatchEvent("destroy",this),this.el[b]=null,o(this.el,"pointerdown",this._onDrag),o(this.el,"touchstart",this._onDrag),o(this.el,"mousedown",this._onDrag),this._clearState(),Array.prototype.forEach.call(this.el.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),clearTimeout(P),M.splice(M.indexOf(this.el),1),this.el=null},_onDrag:function(t){var e=this;if(!_&&!this.options.disabled&&!1!==this.options.group.pull){if(/mousedown|pointerdown/.test(t.type)&&0!==t.button)return!0;var t=h(t),o=t.touch,n=t.e,t=t.target;if(!this.nativeDraggable&&l&&t&&"SELECT"===t.tagName.toUpperCase())return!0;if(t===this.el)return!0;var r=this.options.draggable;if("function"==typeof r){var i=r(n);if(!i)return!0;!function(e){var t=document.createElement("div");try{return t.appendChild(e.cloneNode(!0)),1==e.nodeType}catch(t){return e==window||e==document}}(i)||(_=i)}else if("string"==typeof r){if(!Z(t,r))return!0}else if(r)throw new Error('draggable expected "function" or "string" but received "'.concat(s(r),'"'));if(!(_=_||m(this.el,t,!0))||_.animated)return!0;o&&(_.style["touch-action"]="none"),x=this.el;i=m((O=this).el,_),r=i.rect,t=i.offset,i=(j.from={sortable:this,group:this.el,node:_,rect:r,offset:t},k={x:n.clientX-r.left,y:n.clientY-r.top},C.sortableDown=n,this.nativeDraggable?f(this.ownerDocument,"dragover",w):this.options.supportPointer?f(this.ownerDocument,"pointermove",w):f(this.ownerDocument,o?"touchmove":"mousemove",w),f(this.ownerDocument,"pointerup",this._onDrop),f(this.ownerDocument,"touchend",this._onDrop),f(this.ownerDocument,"mouseup",this._onDrop),this.options),t=i.delay,r=i.delayOnTouchOnly;!t||r&&!o||this.nativeDraggable&&(Y||a)?this._onStart(n,o):(clearTimeout(P),P=setTimeout(function(){return e._onStart(n,o)},t))}},_onStart:function(t,e){D=this.el,T=this.options.group,!this.nativeDraggable||e?(this.options.supportPointer?f(this.ownerDocument,"pointermove",this._onMove):f(this.ownerDocument,e?"touchmove":"mousemove",this._onMove),f(this.ownerDocument,"pointercancel",this._onDrop),f(this.ownerDocument,"touchcancel",this._onDrop)):(_.draggable=!0,f(this.el,"dragstart",this._onDragStart));try{document.selection?setTimeout(function(){document.selection.empty()},0):window.getSelection().removeAllRanges()}catch(t){}},_onDragStart:function(t){this._appendGhost();t=t.dataTransfer;t&&(t.setData("text",""),t.setDragImage(S,k.x,k.y),t.effectAllowed="move")},_triggerEvent:function(t){D=t.rootEl,this.nativeDraggable?(f(this.el,"dragover",Q),f(this.el,"dragend",this._onDrop),this._onDragOver(t)):this._onMove(t)},_onMove:function(t){var e,o,n=this;C.sortableDown&&_&&(this._preventEvent(t),e=(o=h(t)).e,o=o.target,this._onStarted(e,t),t.rootEl&&(this._dispatchEvent("onMove",c(c({},y()),{},{ghostEl:S,event:e,originalEvent:t})),this._allowPut()&&this._onChange(o,e,t),clearTimeout(A),this.options.autoScroll&&(A=setTimeout(function(){return n._autoScroll(n,C)},0))))},_onDragOver:function(t){var e,o,n,r,i;C.sortableDown&&_&&(this._preventEvent(t),e=this._allowPut(),t.dataTransfer&&(t.dataTransfer.dropEffect=e?"move":"none"),this._onStarted(t,t),!t.rootEl||(n=(o=t).clientX,o=o.clientY,r=n-N.x,i=o-N.y,N.x=n,N.y=o,void 0!==n&&void 0!==o&&Math.abs(r)<=0&&Math.abs(i)<=0)||(this._dispatchEvent("onMove",c(c({},y()),{},{ghostEl:S,event:t,originalEvent:t})),e&&this._onChange(t.target,t,t)))},_allowPut:function(){var t;return x===this.el||!!this.options.group.put&&(t=this.options.group.name,T.name&&t&&T.name===t)},_onStarted:function(t,e){var o;C.sortableMove||(this._dispatchEvent("onDrag",c(c({},y()),{},{event:t,originalEvent:e})),this.nativeDraggable||this._appendGhost(),U(_,this.options.chosenClass,!0),_.style["will-change"]="transform",this.nativeDraggable&&this._unbindDropEvents(),l&&g(document.body,"user-select","none")),C.sortableMove=t,this.nativeDraggable||(o=(e=C.sortableDown).clientX,e=e.clientY,i(S,"none"),u(S,"translate3d(".concat(t.clientX-o,"px, ").concat(t.clientY-e,"px, 0)")))},_appendGhost:function(){if(!S){var t,e=this.options,o=e.fallbackOnBody,n=e.ghostClass,e=e.ghostStyle,r=void 0===e?{}:e,e=o?document.body:this.el,o=j.from.rect;for(t in U(S=_.cloneNode(!0),n,!0),g(S,"box-sizing","border-box"),g(S,"margin",0),g(S,"top",o.top),g(S,"left",o.left),g(S,"width",o.width),g(S,"height",o.height),g(S,"opacity","0.8"),g(S,"position","fixed"),g(S,"zIndex","100000"),g(S,"pointerEvents","none"),r)g(S,t,r[t]);this.nativeDraggable&&(g(S,"top","-999px"),g(S,"zIndex","-100000")),i(S,"none"),u(S,"translate3d(0px, 0px, 0px)"),e.appendChild(S);n=k.x/parseInt(S.style.width)*100,o=k.y/parseInt(S.style.height)*100;g(S,"transform-origin","".concat(n,"% ").concat(o,"%")),g(S,"transform","translateZ(0)"),L.ghost=S}},_onChange:function(t,e,o){if(_){if(!function(t,e){for(var o=t.lastElementChild;o&&(o===L.ghost||"none"===g(o,"display")||e&&!Z(o,e));)o=o.previousElementSibling;return o}(D)||t===D&&j.from.group!==D)j.from.sortable._captureAnimationState(_,_),j.to={sortable:this,group:D,node:_,rect:v(_),offset:p(_)},j.from.sortable._dispatchEvent("onRemove",c(c({},y()),{},{event:e,originalEvent:o})),this._dispatchEvent("onAdd",c(c({},y()),{},{event:e,originalEvent:o})),D.appendChild(_),j.from.sortable._rangeAnimate();else{var t=m(D,t),n=t.el,r=t.rect,t=t.offset;if(!n||n.animated||n===_)return;E=n,j.to={sortable:this,group:D,node:E,rect:r,offset:t};var n=e.clientX,i=e.clientY,a=r.left,s=r.right,l=r.top,r=r.bottom;a<n&&n<s&&l<i&&i<r&&(this._captureAnimationState(_,E),j.from.group!==j.to.group?(j.from.sortable._captureAnimationState(_,E),j.from.sortable._dispatchEvent("onRemove",c(c({},y()),{},{event:e,originalEvent:o})),this._dispatchEvent("onAdd",c(c({},y()),{},{event:e,originalEvent:o})),D.insertBefore(_,E),j.from.sortable._rangeAnimate()):(this._dispatchEvent("onChange",c(c({},y()),{},{event:e,originalEvent:o})),(a=p(_)).top<t.top||a.left<t.left?D.insertBefore(_,E.nextSibling):D.insertBefore(_,E)),this._rangeAnimate())}j.from.sortable=this,j.from.group=D}},_onDrop:function(t){var e,o;this._unbindDragEvents(),this._unbindMoveEvents(),this._unbindDropEvents(),this._preventEvent(t),clearTimeout(P),clearTimeout(A),_&&(e=h(t).touch,U(_,this.options.chosenClass,!1),this.nativeDraggable&&(_.draggable=!1),e&&(_.style["touch-action"]=""),_.style["will-change"]="",C.sortableDown&&C.sortableMove&&(j.to.rect=v(_),j.to.offset=p(_),j.from.group=x,j.from.sortable=O,e=j.from.offset,o=j.to.offset,e=e.top!==o.top||e.left!==o.left,o=c(c({},y()),{},{changed:e,event:t,originalEvent:t}),j.to.group!==x&&O._dispatchEvent("onDrop",o),this._dispatchEvent("onDrop",o))),l&&g(document.body,"user-select",""),this._clearState()},_preventEvent:function(t){void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation&&t.stopPropagation()},_dispatchEvent:function(t,e){t=this.options[t];"function"==typeof t&&t(e)},_clearState:function(){S&&S.parentNode&&S.parentNode.removeChild(S),_=E=S=x=T=O=P=A=L.ghost=null,k=N={x:0,y:0},C.destroy(),j.destroy()},_unbindDragEvents:function(){this.nativeDraggable&&(o(this.el,"dragstart",this._onDragStart),o(this.el,"dragover",Q),o(this.el,"dragend",this._onDrop))},_unbindMoveEvents:function(){o(this.ownerDocument,"pointermove",this._onMove),o(this.ownerDocument,"touchmove",this._onMove),o(this.ownerDocument,"mousemove",this._onMove),o(this.ownerDocument,"pointermove",w),o(this.ownerDocument,"touchmove",w),o(this.ownerDocument,"mousemove",w),o(this.ownerDocument,"dragover",w)},_unbindDropEvents:function(){o(this.ownerDocument,"pointerup",this._onDrop),o(this.ownerDocument,"pointercancel",this._onDrop),o(this.ownerDocument,"touchend",this._onDrop),o(this.ownerDocument,"touchcancel",this._onDrop),o(this.ownerDocument,"mouseup",this._onDrop)}}).utils={getRect:v,getOffset:p,debounce:function(o,n,r){var i=null;return function(){var t=this,e=arguments;i&&clearTimeout(i),r&&!i&&o.apply(t,e),i=setTimeout(function(){o.apply(t,e)},n)}},throttle:$},L});

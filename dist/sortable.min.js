!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Sortable=e()}(this,function(){"use strict";function e(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function h(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach(function(t){var e,n;e=o,n=i[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function W(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var s,l=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),X=t(/Edge/i),c=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),Y=t(/iP(ad|od|hone)/i),B=t(/chrome/i)&&t(/android/i),H={capture:!1,passive:!1},N=/\s+/g,u=["-webkit-transition","-moz-transition","-ms-transition","-o-transition","transition"],F=["-webkit-transform","-moz-transform","-ms-transform","-o-transform","transform"],R=(s=!1,document.addEventListener("checkIfSupportPassive",null,{get passive(){return s=!0}}),s);function f(e,n){n?"none"===n?u.forEach(function(t){return E(e,t,"none")}):u.forEach(function(t){return E(e,t,"".concat(t.split("transition")[0],"transform ").concat(n))}):u.forEach(function(t){return E(e,t,"")})}function d(e,n){n?F.forEach(function(t){return E(e,t,"".concat(t.split("transform")[0]).concat(n))}):F.forEach(function(t){return E(e,t,"")})}function p(t){var e=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,t=e||t;return{touch:e,e:t,target:e?document.elementFromPoint(t.clientX,t.clientY):t.target}}function g(t,e,n){window.addEventListener?t.addEventListener(e,n,!(!R&&l)&&H):window.attachEvent&&t.attachEvent("on"+e,n)}function m(t,e,n){window.removeEventListener?t.removeEventListener(e,n,!(!R&&l)&&H):window.detachEvent&&t.detachEvent("on"+e,n)}function v(t){for(var e={top:0,left:0,height:0,width:0},n=(e.height=t.offsetHeight,e.width=t.offsetWidth,e.top=t.offsetTop,e.left=t.offsetLeft,t.offsetParent);null!==n;)e.top+=n.offsetTop,e.left+=n.offsetLeft,n=n.offsetParent;return e}function b(){var t=document.scrollingElement;return!t||t.contains(document.body)?document:t}function y(t){var e;if(t.getBoundingClientRect||t===window)return e={top:0,left:0,bottom:0,right:0,height:0,width:0},t!==window&&t.parentNode&&t!==b()?(t=t.getBoundingClientRect(),e.top=t.top,e.left=t.left,e.bottom=t.bottom,e.right=t.right,e.height=t.height,e.width=t.width):(e.top=0,e.left=0,e.bottom=window.innerHeight,e.right=window.innerWidth,e.height=window.innerHeight,e.width=window.innerWidth),e}function w(t,e,n){var o=W(Array.from(t.children)),t=o.indexOf(e);if(-1<t)return n?o[t]:{index:t,el:o[t],rect:y(o[t]),offset:v(o[t])};for(var i=0;i<o.length;i++)if(function(t,e){var n;if(t&&e)for(n=t.parentNode;n;){if(e===n)return 1;n=n.parentNode}return}(e,o[i]))return n?o[i]:{index:i,el:o[i],rect:y(o[i]),offset:v(o[i])};return n?null:{index:-1,el:null,rect:{},offset:{}}}function D(t,e,n){var o;t&&e&&(t.classList?t.classList[n?"add":"remove"](e):(o=(" "+t.className+" ").replace(N," ").replace(" "+e+" "," "),t.className=(o+(n?" "+e:"")).replace(N," ")))}function q(t,e){if(e&&(">"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function E(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];o[e=e in o||-1!==e.indexOf("webkit")?e:"-webkit-"+e]=n+("string"==typeof n?"":"px")}}function z(n,o,i){var r=null;return function(){var t=this,e=arguments;r&&clearTimeout(r),i&&!r&&n.apply(t,e),r=setTimeout(function(){n.apply(t,e)},o)}}function V(n,o){var i=null;return function(){var t=this,e=arguments;i=i||setTimeout(function(){i=null,n.apply(t,e)},o)}}var _="Sortable"+Date.now(),U=i(function t(){n(this,t),this.sortableDown=void 0,this.sortableMove=void 0,this.animationEnd=void 0}),Z=function(){function t(){n(this,t),this.from={sortable:null,group:null,node:null,rect:{},offset:{}},this.to={sortable:null,group:null,node:null,rect:{},offset:{}}}return i(t,[{key:"destroy",value:function(){this.from={sortable:null,group:null,node:null,rect:{},offset:{}},this.to={sortable:null,group:null,node:null,rect:{},offset:{}}}}]),t}(),$=function(){function e(t){n(this,e),this.el=null,this.distance={x:0,y:0},this.options=t.options,this.container=t.container}return i(e,[{key:"init",value:function(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];this.el=t,n&&(n=(t=this.options).ghostClass,t=void 0===(t=t.ghostStyle)?{}:t,D(this.el,n,!0),E(this.el,"box-sizing","border-box"),E(this.el,"margin",0),E(this.el,"top",e.top),E(this.el,"left",e.left),E(this.el,"width",e.width),E(this.el,"height",e.height),E(this.el,"opacity","0.8"),E(this.el,"position","fixed"),E(this.el,"zIndex","100000"),E(this.el,"pointerEvents","none"),this.setStyle(t),f(this.el,"none"),d(this.el,"translate3d(0px, 0px, 0px)"),this.container.appendChild(this.el),E(this.el,"transform-origin",this.distance.x/parseInt(this.el.style.width)*100+"% "+this.distance.y/parseInt(this.el.style.height)*100+"%"),E(this.el,"transform","translateZ(0)"))}},{key:"setStyle",value:function(t){for(var e in t)E(this.el,e,t[e])}},{key:"rect",value:function(){return y(this.el)}},{key:"move",value:function(t,e){this.el&&(f(this.el,2<arguments.length&&void 0!==arguments[2]&&arguments[2]?"".concat(this.options.ghostAnimation,"ms"):"none"),d(this.el,"translate3d(".concat(t,"px, ").concat(e,"px, 0)")))}},{key:"clear",value:function(){this.distance={x:0,y:0},this.el&&this.el.remove(),this.el=null}},{key:"destroy",value:function(t){var e,n,o=this;this.el&&(n=parseInt(this.el.style.left),e=parseInt(this.el.style.top),this.move(t.left-n,t.top-e,!0),(n=this.options.ghostAnimation)?setTimeout(function(){return o.clear()},n):this.clear())}}]),e}();function G(){var i=[];return{_captureAnimationState:function(t,e){var n=W(Array.from(this.el.children)),e=(t=t,e=e,t=(o=n).indexOf(t),o=o.indexOf(e),t<o?{start:t,end:o}:{start:o,end:t}),o=e.start,t=e.end;i.length=0,n.slice(o,t+1).forEach(function(t){i.push({target:t,rect:y(t)})})},_rangeAnimate:function(){var n=this;i.forEach(function(t){var e=t.target,t=t.rect;n._animate(e,t,n.options.animation)})},_animate:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:150,o=y(t),i=e.left-o.left,e=e.top-o.top;f(t,"none"),d(t,"translate3d(".concat(i,"px, ").concat(e,"px, 0)")),t.offsetWidth,f(t,"".concat(n,"ms")),d(t,"translate3d(0px, 0px, 0px)"),clearTimeout(t.animated),t.animated=setTimeout(function(){f(t,""),d(t,""),t.animated=null},n)}}}function S(t){if(K(t),x){var e=t=t.touches?t.touches[0]:t,n=e.clientX,e=e.clientY,o=J(n,e);if(o){var i,r={};for(i in t)r[i]=t[i];r.target=document.elementFromPoint(n,e),r.rootEl=o,r.preventDefault=void 0,r.stopPropagation=void 0,o[_]._triggerEvent(r)}}}function J(i,r){var s;return tt.some(function(t){var e,n,o=t[_].options.emptyInsertThreshold;if(o)return n=y(t),e=i>=n.left-o&&i<=n.right+o,n=r>=n.top-o&&r<=n.bottom+o,e&&n?s=t:void 0}),s}function K(t){var e=t.clientX,t=t.clientY,n=e-L.x,o=t-L.y;L.x=e,L.y=t,void 0!==e&&Math.abs(n)<1&&void 0!==t&&Math.abs(o)}var T,x,O,P,C,M,Q="undefined"!=typeof document&&!B&&!Y&&"draggable"in document.createElement("div"),tt=[],A={x:0,y:0},j=new U,k=new Z,L={x:0,y:0};function I(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));(t[_]=this).el=t,this.scrollEl=function(t,e){if(!t||!t.getBoundingClientRect)return b();var n=t,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=E(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return b();if(o||e)return n;o=!0}}}while(n=n.parentNode);return b()}(t,!0),this.options=e=Object.assign({},e),this.ownerDocument=t.ownerDocument;var n,o,i={group:"",animation:150,draggable:void 0,onDrag:void 0,onMove:void 0,onDrop:void 0,onChange:void 0,autoScroll:!0,scrollStep:5,scrollThreshold:15,delay:0,delayOnTouchOnly:!1,disabled:!1,ghostAnimation:0,ghostClass:"",ghostStyle:{},chosenClass:"",fallbackOnBody:!1,forceFallback:!1,stopPropagation:!1,supportPointer:"PointerEvent"in window&&!c,supportTouch:"ontouchstart"in window,emptyInsertThreshold:5};for(n in i)n in this.options||(this.options[n]=i[n]);for(o in this.container=this.options.fallbackOnBody?document.body:t,this.nativeDraggable=!this.options.forceFallback&&Q,this.ghost=new $(this),this.dragStartTimer=null,this.autoScrollTimer=null,s={},(r=(e=e).group)&&"object"==a(r)||(r={name:r}),s.name=r.name,s.pull=r.pull,s.put=r.put,e.group=s,this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));var r=this.options,e=r.supportPointer,s=r.supportTouch;g(t,e?"pointerdown":s?"touchstart":"mousedown",this._onDrag),this.nativeDraggable&&(g(t,"dragover",this),g(t,"dragenter",this)),tt.push(t),Object.assign(this,G(),(window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)}),{_autoScroll:V(function(t,e){var n,o,i,r,s,a,l,c,h,u,f,d,p,g,m;t.scrollEl&&e.sortableDown&&e.sortableMove&&(n=(o=e.sortableMove).clientX,o=o.clientY,void 0!==n&&void 0!==o&&t.scrollEl!==t.ownerDocument&&(i=(g=t.scrollEl).scrollTop,r=g.scrollLeft,s=g.scrollHeight,g=g.scrollWidth,a=(p=y(t.scrollEl)).top,f=p.right,l=p.bottom,d=p.left,c=p.height,p=p.width,h=(u=t.options).scrollStep,u=u.scrollThreshold,d=0<r&&d<=n&&n<=d+u,p=r+p<g&&n<=f&&f-u<=n,g=i+c<s&&o<=l&&l-u<=o,m={x:r,y:i},(f=0<i&&a<=o&&o<=a+u)?(m.x=d?r-h:p?r+h:r,m.y=i-h):g?(m.x=d?r-h:p?r+h:r,m.y=i+h):d?(m.x=r-h,m.y=i):p&&(m.x=r+h,m.y=i),(f||d||p||g)&&requestAnimationFrame(function(){t.scrollEl.scrollTo(m.x,m.y),t._autoScroll(t,e)})))},10)}))}return(I.prototype={constructor:I,destroy:function(){this.el[_]=null,m(this.el,"pointerdown",this._onDrag),m(this.el,"touchstart",this._onDrag),m(this.el,"mousedown",this._onDrag),this.nativeDraggable&&(m(this.el,"dragover",this),m(this.el,"dragenter",this)),this._clearState(),Array.prototype.forEach.call(this.el.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")})},set:function(t,e){this.options[t]=e},get:function(t){return this.options[t]},_onDrag:function(t){var e=this;if(!(/mousedown|pointerdown/.test(t.type)&&0!==t.button||this.options.disabled)&&this.options.group.pull){var n=p(t),o=n.touch,i=n.e,n=n.target;if(this.nativeDraggable||!c||!n||"SELECT"!==n.tagName.toUpperCase()){if(n===this.el)return!0;this.options.stopPropagation&&t.stopPropagation&&t.stopPropagation();t=this.options.draggable;if("function"==typeof t){var r=t(i);if(!r)return!0;!function(e){var t=document.createElement("div");try{return t.appendChild(e.cloneNode(!0)),1==e.nodeType}catch(t){return e==window||e==document}}(r)||(x=r)}else if("string"==typeof t){if(!q(n,t))return!0}else if(t)throw new Error('draggable expected "function" or "string" but received "'.concat(a(t),'"'));if(!(x=x||w(this.el,n,!0))||x.animated)return!0;o&&(x.style["touch-action"]="none");r=w(this.el,x),t=r.rect,n=r.offset,r=(A={x:i.clientX,y:i.clientY},k.from={sortable:this,group:this.el,node:x,rect:t,offset:n},this.ghost.distance={x:i.clientX-t.left,y:i.clientY-t.top},j.sortableDown=i,g(this.ownerDocument,"dragover",S),g(this.ownerDocument,"mousemove",S),g(this.ownerDocument,"touchmove",S),g(this.ownerDocument,"pointerup",this._onDrop),g(this.ownerDocument,"touchend",this._onDrop),g(this.ownerDocument,"mouseup",this._onDrop),this.options),n=r.delay,t=r.delayOnTouchOnly;!n||t&&!o||this.nativeDraggable&&(X||l)?this._onStart(i,o):(clearTimeout(this.dragStartTimer),this.dragStartTimer=setTimeout(function(){return e._onStart(i,o)},n))}}},_onStart:function(t,e){T=this.el,P=x.nextSibling,M=this.options.group,!this.nativeDraggable||e?(this.options.supportPointer?g(this.ownerDocument,"pointermove",this._onMove):g(this.ownerDocument,e?"touchmove":"mousemove",this._onMove),g(this.ownerDocument,"pointercancel",this._onDrop),g(this.ownerDocument,"touchcancel",this._onDrop)):(x.draggable=!0,g(x,"dragend",this),g(this.el,"dragstart",this._onDragStart));try{document.selection?setTimeout(function(){document.selection.empty()},0):window.getSelection().removeAllRanges()}catch(t){}},_triggerEvent:function(t){M.name===this.options.group.name&&(T=t.rootEl,this.nativeDraggable?(g(this.el,"dragend",this._onDrop),this._onDragOver(t)):this._onMove(t))},_onDragStart:function(t){t.dataTransfer&&(t.dataTransfer.setData("draggableEffect",t.target.innerText),t.dataTransfer.effectAllowed="move"),g(this.el,"dragover",this._onDragOver),g(this.el,"dragend",this._onDrop)},_onDragOver:function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),j.sortableDown&&x&&(this._preventEvent(t),K(t),this._onStarted(t,t),this._dispatchEvent("onMove",h(h({},k),{},{ghostEl:C,event:t,originalEvent:t})),!this.options.group.put&&k.from.group!==this.el||this._onChange(t.target,t,t))},_onStarted:function(t,e){j.sortableMove=t,C||(this._dispatchEvent("onDrag",{dragEl:x,event:t,originalEvent:e}),t=k.from.rect,C=x.cloneNode(!0),this.ghost.init(C,t,!this.nativeDraggable),I.ghost=C,D(x,this.options.chosenClass,!0),x.style["will-change"]="transform",this.nativeDraggable&&(this._unbindDropEvents(),g(document,"drop",this)),c&&E(document.body,"user-select","none"))},_onMove:function(t){var e,n,o,i,r,s,a=this;j.sortableDown&&x&&((n=p(t)).touch,e=n.e,n=n.target,o=e.clientX,i=e.clientY,r=o-A.x,s=i-A.y,void 0!==o&&Math.abs(r)<=0&&void 0!==i&&Math.abs(s)<=0||(this._preventEvent(t),this._onStarted(e,t),this.ghost.move(r,s),this._dispatchEvent("onMove",h(h({},k),{},{ghostEl:C,event:e,originalEvent:t})),this._onChange(n,e,t),clearTimeout(this.autoScrollTimer),this.options.autoScroll&&(this.autoScrollTimer=setTimeout(function(){return a._autoScroll(a,j)},0))))},_onChange:z(function(t,e,n){var o,i,r,s,a,l,c;!function(t,e){for(var n=t.lastElementChild;n&&(n===I.ghost||"none"===E(n,"display")||e&&!q(n,e));)n=n.previousElementSibling;return n}(this.el)?(this.el.appendChild(x),k.to={sortable:this,group:this.el,node:x,rect:y(x),offset:v(x)},this._dispatchEvent("onChange",h(h({},k),{},{event:e,originalEvent:n}))):(o=(t=w(T,t)).el,l=t.rect,t=t.offset,!o||!x||o&&o.animated||o!==x&&(O=o,k.to={sortable:this,group:this.el,node:O,rect:l,offset:t},i=e.clientX,r=e.clientY,c=l.left,s=l.right,a=l.top,l=l.bottom,c<i&&i<s&&a<r&&r<l&&(T!==this.el?(P?this.el.insertBefore(x,P):this.el.appendChild(x),this._dispatchEvent("onChange",h(h({},k),{},{event:e,originalEvent:n}))):(this._captureAnimationState(x,O),this._dispatchEvent("onChange",h(h({},k),{},{event:e,originalEvent:n})),(c=v(x)).top<t.top||c.left<t.left?this.el.insertBefore(x,o.nextElementSibling):this.el.insertBefore(x,o),this._rangeAnimate()))))},5),_onDrop:function(t){var e,n;this._unbindDragEvents(),this._unbindMoveEvents(),this._unbindDropEvents(),this._preventEvent(t),this.dragStartTimer&&clearTimeout(this.dragStartTimer),x&&(this.nativeDraggable&&m(x,"dragend",this),e=p(t).touch,D(x,this.options.chosenClass,!1),this.nativeDraggable&&(x.draggable=!1),e&&(x.style["touch-action"]=""),x.style["will-change"]="",j.sortableDown&&j.sortableMove&&(k.to.offset=v(x),k.to.rect=y(x),e=k.from.offset,n=k.to.offset,e=e.top!==n.top||e.left!==n.left,this._dispatchEvent("onDrop",{changed:e,event:t,originalEvent:t}))),c&&E(document.body,"user-select",""),this.ghost.destroy(k.to.rect),this._clearState()},_preventEvent:function(t){this.options.stopPropagation&&t.stopPropagation&&t.stopPropagation(),void 0!==t.preventDefault&&t.cancelable&&t.preventDefault()},_dispatchEvent:function(t,e){t=this.options[t];"function"==typeof t&&t(e)},_clearState:function(){j=new U,k.destroy(),x=O=P=C=M=null,A=L={x:0,y:0}},_unbindDragEvents:function(){this.nativeDraggable&&(m(this.el,"dragstart",this._onDragStart),m(this.el,"dragover",this._onDragOver),m(this.el,"dragend",this._onDrop),m(document,"drop",this))},_unbindMoveEvents:function(){m(this.ownerDocument,"pointermove",this._onMove),m(this.ownerDocument,"touchmove",this._onMove),m(this.ownerDocument,"mousemove",this._onMove),m(this.ownerDocument,"touchmove",S),m(this.ownerDocument,"mousemove",S),m(this.ownerDocument,"dragover",S)},_unbindDropEvents:function(){m(this.ownerDocument,"pointerup",this._onDrop),m(this.ownerDocument,"pointercancel",this._onDrop),m(this.ownerDocument,"touchend",this._onDrop),m(this.ownerDocument,"touchcancel",this._onDrop),m(this.ownerDocument,"mouseup",this._onDrop)}}).utils={getRect:y,getOffset:v,debounce:z,throttle:V},I});

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Sortable=e()}(this,function(){"use strict";function Y(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function l(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(i),!0).forEach(function(t){var e,n;e=o,n=i[t=t],(t=function(t){t=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var L={capture:!1,passive:!1},R=/\s+/g,e={start:["pointerdown","touchstart","mousedown"],move:["pointermove","touchmove","mousemove"],end:["pointerup","pointercancel","touchend","touchcancel","mouseup"]};function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var n,d=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),k=t(/Edge/i),a=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),H=(n=!1,document.addEventListener("checkIfSupportPassive",null,{get passive(){return n=!0}}),n),c="undefined"==typeof window||"undefined"==typeof document?"":(r=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],"ms"!==(r=(Array.prototype.slice.call(r).join("").match(/-(moz|webkit|ms)-/)||""===r.OLink&&["","o"])[1])?r&&r.length?r[0].toUpperCase()+r.substr(1):"":"ms");function i(t,e){t.style["".concat(c,"TransitionDuration")]=null==e?"":"".concat(e,"ms")}function u(t,e){t.style["".concat(c,"Transform")]=e?"".concat(e):""}function h(t,e,n){window.addEventListener?t.addEventListener(e,n,!(!H&&d)&&L):window.attachEvent&&t.attachEvent("on"+e,n)}function o(t,e,n){window.removeEventListener?t.removeEventListener(e,n,!(!H&&d)&&L):window.detachEvent&&t.detachEvent("on"+e,n)}function I(t){var e=t,n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||t.pointerType&&"touch"===t.pointerType&&t,t=n?document.elementFromPoint(n.clientX,n.clientY):t.target;return!n||"clientX"in e||(e.clientX=n.clientX,e.clientY=n.clientY,e.pageX=n.pageX,e.pageY=n.pageY,e.screenX=n.screenX,e.screenY=n.screenY),{touch:n,event:e,target:t}}function p(t,e){for(var n={top:0,left:0,height:t.offsetHeight,width:t.offsetWidth};n.top+=t.offsetTop,n.left+=t.offsetLeft,(t=t.parentNode)&&t!==e;);return n}function W(){var t=document.scrollingElement;return!t||t.contains(document.body)?document:t}function m(t){var e,n,o,i,r,s,a,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=2<arguments.length?arguments[2]:void 0;if(t.getBoundingClientRect||t===window){if(t!==window&&t.parentNode&&t!==W()){if(n=(e=t.getBoundingClientRect()).top,o=e.left,i=e.bottom,r=e.right,s=e.height,a=e.width,l.parent&&t.parentNode!==t.ownerDocument.body)for(var u,h=t.parentNode;h&&h.getBoundingClientRect&&h!==t.ownerDocument.body;){if((u=h.getBoundingClientRect()).height<s)return n=u.top,o=u.left,i=u.bottom,r=u.right,s=u.height,{top:n,left:o,bottom:i,right:r,width:a=u.width,height:s};h=h.parentNode}}else o=n=0,i=window.innerHeight,r=window.innerWidth,s=window.innerHeight,a=window.innerWidth;if((l.block||l.relative)&&t!==window&&(c=c||t.parentNode,!d))do{if(c&&c.getBoundingClientRect&&("none"!==v(c,"transform")||l.relative&&"static"!==v(c,"position"))){var p=c.getBoundingClientRect();n-=p.top+parseInt(v(c,"border-top-width")),o-=p.left+parseInt(v(c,"border-left-width")),i=n+e.height,r=o+e.width;break}}while(c=c.parentNode);return{top:n,left:o,bottom:i,right:r,width:a,height:s}}}function z(t,e,n,o){if(t){n=n||document;do{if(null==e){var i=Array.prototype.slice.call(n.children),r=i.indexOf(t);if(-1<r)return i[r];for(var s=0;s<i.length;s++)if(q(t,i[s]))return i[s]}else if(">"===e[0]?t.parentNode===n&&g(t,e):g(t,e)||o&&t===n)return t}while(t=t.parentNode)}return null}function q(t,e){if(t&&e){if(e.compareDocumentPosition)return e===t||16&e.compareDocumentPosition(t);if(e.contains&&1===t.nodeType)return e.contains(t)&&e!==t;for(;t=t.parentNode;)if(t===e)return 1}}function f(t,e,n){var o;t&&e&&(t.classList?t.classList[n?"add":"remove"](e):(o=(" "+t.className+" ").replace(R," ").replace(" "+e+" "," "),t.className=(o+(n?" "+e:"")).replace(R," ")))}function g(t,e){if(e&&(">"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function V(t,e){return t.top!==e.top||t.left!==e.left}function v(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];o[e=e in o||-1!==e.indexOf("webkit")?e:"-webkit-"+e]=n+("string"==typeof n?"":"px")}}var b="Sortable"+Date.now(),r={sortable:null,nodes:[]},s=l({},r),y=l({},r),w={};function U(t){this.options=t||{},this.groupName=t.group.name}function Z(){this.autoScrollAnimationFrame=null,this.speed={x:10,y:10}}function G(t){this.options=t,this.animations=[]}function J(){this.helper=null,this.distance={x:0,y:0}}U.prototype={allowDrag:function(t){return this.options.multiple&&w[this.groupName]&&w[this.groupName].length&&-1<w[this.groupName].indexOf(t)},getHelper:function(){var n=document.createElement("div");return w[this.groupName].forEach(function(t,e){t=t.cloneNode(!0);t.style="\n        opacity: ".concat(0===e?1:.5,";\n        position: absolute;\n        z-index: ").concat(e,";\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n      "),n.appendChild(t)}),n},select:function(t,e,n){var o,i;e&&(w[this.groupName]||(w[this.groupName]=[]),o=w[this.groupName].indexOf(e),f(e,this.options.selectedClass,o<0),t=l(l({},n),{},{event:t}),o<0?(w[this.groupName].push(e),n.sortable._dispatchEvent("onSelect",t)):(w[this.groupName].splice(o,1),n.sortable._dispatchEvent("onDeselect",t)),i=n.sortable.el,w[this.groupName].sort(function(t,e){return t=p(t,i),e=p(e,i),t.top==e.top?t.left-e.left:t.top-e.top}))},onDrag:function(e){s.sortable=e,s.nodes=w[this.groupName].map(function(t){return{node:t,rect:m(t),offset:p(t,e.el)}}),y.sortable=e},onTrulyStarted:function(e,t){t.animator.collect(e,null,e.parentNode),w[this.groupName].forEach(function(t){t!=e&&t.parentNode.removeChild(t)}),t.animator.animate()},onChange:function(t,e){var n=m(t),o=p(t,e.el);y.sortable=e,y.nodes=w[this.groupName].map(function(t){return{node:t,rect:n,offset:o}})},onDrop:function(t,n,e,o){var i=this,r=(y.sortable.animator.collect(n,null,n.parentNode),w[this.groupName].indexOf(n)),e=(w[this.groupName].forEach(function(t,e){e<r?n.parentNode.insertBefore(t,n):(e=0<e?w[i.groupName][e-1]:n,n.parentNode.insertBefore(t,e.nextSibling))}),s.sortable=e.sortable,y.nodes=w[this.groupName].map(function(t){return{node:t,rect:m(t),offset:p(t,y.sortable.el)}}),this._offsetChanged(s.nodes,y.nodes)),o=l(l({},o()),{},{changed:e,event:t});y.sortable.el!=s.sortable.el&&s.sortable._dispatchEvent("onDrop",o),y.sortable._dispatchEvent("onDrop",o),y.sortable.animator.animate()},_offsetChanged:function(t,n){return!!t.find(function(e){return V(n.find(function(t){return t.node===e.node}).offset,e.offset)})}},window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,17)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),Z.prototype={clear:function(){null!=this.autoScrollAnimationFrame&&(cancelAnimationFrame(this.autoScrollAnimationFrame),this.autoScrollAnimationFrame=null)},update:function(t,e,n,o){var i=this;cancelAnimationFrame(this.autoScrollAnimationFrame),this.autoScrollAnimationFrame=requestAnimationFrame(function(){n&&o&&i.autoScroll(t,e,o),i.update(t,e,n,o)})},autoScroll:function(t,e,n){var o,i,r,s,a,l,c,u,h,p,d,f;t&&(o=n.clientX,n=n.clientY,void 0!==o)&&void 0!==n&&(h=m(t))&&(d=t.scrollTop,i=t.scrollLeft,r=t.scrollHeight,p=t.scrollWidth,s=h.top,a=h.right,l=h.bottom,c=h.left,f=h.height,h=h.width,n<s||a<o||l<n||o<c||(u=0<d&&s<=n&&n<=s+e,h=i+h<p&&o<=a&&a-e<=o,p=d+f<r&&n<=l&&l-e<=n,d=(f=d=0)<i&&c<=o&&o<=c+e?Math.floor(Math.max(-1,(o-c)/e-1)*this.speed.x):h?Math.ceil(Math.min(1,(o-a)/e+1)*this.speed.x):0,(f=u?Math.floor(Math.max(-1,(n-s)/e-1)*this.speed.y):p?Math.ceil(Math.min(1,(n-l)/e+1)*this.speed.y):0)&&(t.scrollTop+=f),d&&(t.scrollLeft+=d)))}},G.prototype={collect:function(t,e,n,o){var i=this;n&&(n=Array.prototype.slice.call(n.children),e=(t=this._getRange(n,t,e,o)).start,t=t.end,this.animations.length=0,n.slice(e,t+1).forEach(function(t){t!==o&&t!==B.helper&&i.animations.push({node:t,rect:m(t)})}))},animate:function(){var n=this;this.animations.forEach(function(t){var e=t.node,t=t.rect;n._excute(e,t)})},_excute:function(t,e){var n=e.left,e=e.top,o=m(t),e=e-o.top,n=n-o.left,o=(i(t),u(t,"translate3d(".concat(n,"px, ").concat(e,"px, 0)")),t.offsetWidth,this.options.animation);i(t,o),u(t,"translate3d(0px, 0px, 0px)"),clearTimeout(t.animated),t.animated=setTimeout(function(){i(t),u(t,""),t.animated=null},o)},_getRange:function(t,e,n){var o,e=t.indexOf(e),n=t.indexOf(n);return n<e&&(e=(o=[n,e])[0],n=o[1]),e<0&&(e=n,n=t.length-1),{start:e,end:n=n<0?t.length-1:n}}},J.prototype={get node(){return this.helper},destroy:function(){this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.helper=null,this.distance={x:0,y:0}},move:function(t,e){u(this.helper,"translate3d(".concat(t,"px, ").concat(e,"px, 0)"))},init:function(t,e,n,o){if(!this.helper){var i,r=o.fallbackOnBody,s=o.ghostClass,o=o.ghostStyle,o=void 0===o?{}:o,r=r?document.body:n,a=(this.helper=e.cloneNode(!0),f(this.helper,s,!0),l({"box-sizing":"border-box",top:t.top,left:t.left,width:t.width,height:t.height,position:"fixed",opacity:"0.8","z-index":1e5,"pointer-events":"none"},o));for(i in a)v(this.helper,i,a[i]);n=this.helper,e="none",n.style["".concat(c,"Transition")]=e?"none"===e?"none":"".concat(e):"",u(this.helper,"translate3d(0px, 0px, 0px)"),r.appendChild(this.helper);s=this.distance.x/parseInt(this.helper.style.width)*100,t=this.distance.y/parseInt(this.helper.style.height)*100;v(this.helper,"transform-origin","".concat(s,"% ").concat(t,"%")),v(this.helper,"transform","translateZ(0)")}}};function K(t){var e;S&&(e=t.touches?t.touches[0]:t,e=Q(e.clientX,e.clientY))&&(D=e)!==N.sortable.el&&e[b]._onMove(t)}function Q(i,r){var s;return P.some(function(t){var e,n,o=t[b].options.emptyInsertThreshold;if(o)return n=m(t,{parent:!0}),e=i>=n.left-o&&i<=n.right+o,n=r>=n.top-o&&r<=n.bottom+o,e&&n?s=t:void 0}),s}function _(){var t,e={from:l({},A),to:l({},j)};return C&&(t={from:l({},s),to:l({},y)},e.from=l(l({},t.from),e.from),e.to=l(l({},t.to),e.to)),e}var D,S,E,N,x,T,C,$,O,tt={sortable:null,group:null,node:null,rect:{},offset:{}},P=[],M=new J,et=new Z,A=l({},tt),j=l({},tt),X={x:0,y:0},nt=function(t,e){var n={},o=t.group;o&&"object"==F(o)||(o={name:o,pull:!0,put:!0}),n.name=o.name||e,n.pull=o.pull,n.put=o.put,t.group=n};function B(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));(t[b]=this).el=t,this.ownerDocument=t.ownerDocument,this.options=e=Object.assign({},e);var n,o,i={group:"",animation:150,multiple:!1,draggable:null,handle:null,onDrag:null,onMove:null,onDrop:null,onChange:null,autoScroll:!0,scrollThreshold:25,delay:0,delayOnTouchOnly:!1,disabled:!1,ghostClass:"",ghostStyle:{},chosenClass:"",selectedClass:"",fallbackOnBody:!1,stopPropagation:!1,supportPointer:"onpointerdown"in window&&!a,supportTouch:"ontouchstart"in window,emptyInsertThreshold:5};for(n in i)n in this.options||(this.options[n]=i[n]);for(o in nt(e,"group_"+Number(Math.random().toString().slice(-3)+Date.now()).toString(32)),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));var e=this.options,r=e.supportPointer,e=e.supportTouch;r?(h(t,"pointerdown",this._onDrag),h(t,"touchstart",this._preventEvent)):h(t,e?"touchstart":"mousedown",this._onDrag),P.push(t),this.multiplayer=new U(this.options),this.animator=new G(this.options)}return(B.prototype={constructor:B,destroy:function(){this._dispatchEvent("destroy",this),this.el[b]=null;for(var t=0;t<e.start.length;t++)o(this.el,e.start[t],this._onDrag);this._clearState(),P.splice(P.indexOf(this.el),1),this.el=null},_onDrag:function(t){var e=this;if(!this.options.disabled&&this.options.group.pull&&(!/mousedown|pointerdown/.test(t.type)||0===t.button)){var n=I(t),o=n.touch,i=n.event,n=n.target;if(!(a&&n&&"SELECT"===n.tagName.toUpperCase()||n===this.el)){var r=this.options,s=r.draggable,r=r.handle;if(("function"!=typeof r||r(t))&&("string"!=typeof r||g(n,r))){if("function"==typeof s){r=s(t);if(!r)return;!function(e){if(e){var t=document.createElement("div");try{return t.appendChild(e.cloneNode(!0)),1==e.nodeType}catch(t){return e==window||e==document}}}(r)||(S=r)}else S=z(n,s,this.el,!1);S&&!S.animated&&(o&&v(S,"touch-action","none"),t=S.parentNode,T=o,(N=i).sortable=this,N.group=t,(C=this.options.multiple&&this.multiplayer.allowDrag(S))&&this.multiplayer.onDrag(this),r=m(S),n=p(S,this.el),A={sortable:this,group:t,node:S,rect:r,offset:n},j.group=t,j.sortable=this,M.distance={x:i.clientX-r.left,y:i.clientY-r.top},this.options.supportPointer?h(this.ownerDocument,"pointermove",K):h(this.ownerDocument,o?"touchmove":"mousemove",K),n=(s=this.options).delay,t=s.delayOnTouchOnly,!n||t&&!o||k||d?this._onStart():(this.options.supportPointer?h(this.ownerDocument,"pointerup",this._onDrop):h(this.ownerDocument,T?"touchend":"mouseup",this._onDrop),clearTimeout(O),O=setTimeout(function(){return e._onStart()},n)))}}}},_onStart:function(){D=this.el,this.options.supportPointer?(h(this.ownerDocument,"pointermove",this._onMove),h(this.ownerDocument,"pointerup",this._onDrop),h(this.ownerDocument,"pointercancel",this._onDrop)):T?(h(this.ownerDocument,"touchmove",this._onMove),h(this.ownerDocument,"touchend",this._onDrop),h(this.ownerDocument,"touchcancel",this._onDrop)):(h(this.ownerDocument,"mousemove",this._onMove),h(this.ownerDocument,"mouseup",this._onDrop));try{document.selection?setTimeout(function(){document.selection.empty()},0):window.getSelection().removeAllRanges()}catch(t){}},_onTrulyStarted:function(){var t;x||(this._dispatchEvent("onDrag",l(l({},_()),{},{event:N})),C&&this.multiplayer.onTrulyStarted(S,this),t=C?this.multiplayer.getHelper():S,M.init(A.rect,t,this.el,this.options),B.helper=M.node,f(S,this.options.chosenClass,!0),v(S,"will-change","transform"),a&&v(document.body,"user-select","none"))},_allowPut:function(){var t,e;return N.group===this.el||!!this.options.group.put&&(t=this.options.group.name,(e=N.sortable.options.group).name)&&t&&e.name===t},_onMove:function(t){if(this._preventEvent(t),N&&S&&(e=(n=t).clientX,n=n.clientY,o=e-X.x,i=n-X.y,X.x=e,X.y=n,!(void 0!==e&&void 0!==n&&Math.abs(o)<=0&&Math.abs(i)<=0))){var e=I(t),n=e.event,o=e.target,i=(this._onTrulyStarted(),x=n,t.clientX-N.clientX),t=t.clientY-N.clientY,t=(M.move(i,t),this._dispatchEvent("onMove",l(l({},_()),{},{event:n})),this.scrollEl||(this.scrollEl=function(t,e){if(t&&t.getBoundingClientRect){var n=t,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=v(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return W();if(o||e)return n;o=!0}}}while(n=n.parentNode)}return W()}(this.el,!0)),this.options),r=t.autoScroll,t=t.scrollThreshold;if(r&&et.update(this.scrollEl,t,N,x),this._allowPut()){if(E=z(o,this.options.draggable,D,!1)){if(E===$)return;if(($=E).animated||q(E,S))return}E!==S&&(D!==A.sortable.el?o!==D&&function(t,e,n){for(var o=t.lastElementChild;o&&(o===e||"none"===v(o,"display")||n&&!g(o,n));)o=o.previousElementSibling;return o}(D,M.node)?E&&this._onInsert(n,!1):this._onInsert(n,!0):E&&this._onChange(n))}}},_onInsert:function(t,e){var n=e?S:E,o=e?D:E.parentNode;A.sortable.animator.collect(S,null,S.parentNode,S),this.animator.collect(null,n,o,S),C&&this.multiplayer.onChange(S,this),j={sortable:this,group:o,node:n,rect:m(S),offset:p(S,D)},A.sortable._dispatchEvent("onRemove",l(l({},_()),{},{event:t})),e?o.appendChild(S):o.insertBefore(S,n),this._dispatchEvent("onAdd",l(l({},_()),{},{event:t})),A.sortable.animator.animate(),this.animator.animate(),A.group=o,A.sortable=this},_onChange:function(t){var e=E.parentNode,t=(this.animator.collect(S,E,e),C&&this.multiplayer.onChange(S,this),j={sortable:this,group:e,node:E,rect:m(E),offset:p(E,D)},this._dispatchEvent("onChange",l(l({},_()),{},{event:t})),p(S,D)),n=null,n=t.top===j.offset.top?t.left<j.offset.left?E.nextSibling:E:t.top<j.offset.top?E.nextSibling:E;e.insertBefore(S,n),this.animator.animate(),A.group=e,A.sortable=this},_onDrop:function(t){this._unbindMoveEvents(),this._unbindDropEvents(),this._preventEvent(t),et.clear(),clearTimeout(O),S&&(f(S,this.options.chosenClass,!1),T&&v(S,"touch-action",""),v(S,"will-change","")),S&&N&&x?this._onEnd(t):this.options.multiple&&this.multiplayer.select(t,S,l({},A)),this._clearState()},_onEnd:function(t){var e;A.group=N.group,A.sortable=N.sortable,C?this.multiplayer.onDrop(t,S,N,_):(j.rect=m(S),j.offset=p(S,D),e=j.sortable.el!==A.sortable.el||V(A.offset,j.offset),e=l(l({},_()),{},{changed:e,event:t}),j.sortable.el!==A.sortable.el&&A.sortable._dispatchEvent("onDrop",e),j.sortable._dispatchEvent("onDrop",e)),a&&v(document.body,"user-select","")},_preventEvent:function(t){void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),this.options.stopPropagation&&(t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0)},_dispatchEvent:function(t,e){t=this.options[t];"function"==typeof t&&t(e)},_clearState:function(){S=E=N=x=T=C=$=O=B.helper=null,X={x:0,y:0},A=j=l({},tt),M.destroy()},_unbindMoveEvents:function(){for(var t=0;t<e.move.length;t++)o(this.ownerDocument,e.move[t],this._onMove),o(this.ownerDocument,e.move[t],K)},_unbindDropEvents:function(){for(var t=0;t<e.end.length;t++)o(this.ownerDocument,e.end[t],this._onDrop)}}).utils={getRect:m,getOffset:p},B});
